(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{235:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var t=a(5155),r=a(2115),l=a(489),i=a(2885),c=a(5016);let n=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.b,{ref:a,className:(0,c.cn)(n(),e),...s}));o.displayName=l.b.displayName},923:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>o,av:()=>d,j7:()=>n,tU:()=>c});var t=a(5155),r=a(2115),l=a(5667),i=a(5016);let c=l.bL,n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.B8,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));n.displayName=l.B8.displayName;let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=l.l9.displayName;let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=l.UC.displayName},2317:(e,s,a)=>{Promise.resolve().then(a.bind(a,2853))},2559:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>n,TN:()=>o});var t=a(5155),r=a(2115),l=a(2885),i=a(5016);let c=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=r.forwardRef(({className:e,variant:s,...a},r)=>(0,t.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(c({variant:s}),e),...a}));n.displayName="Alert",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},2853:(e,s,a)=>{"use strict";a.d(s,{DashboardContent:()=>sO});var t=a(5155),r=a(2115),l=a(3209),i=a(923),c=a(7003),n=a(235),o=a(7001),d=a(7812),x=a(2559),m=a(5282),h=a(9716),u=a(6485),p=a(5016),j=a(368),g=a(7937),f=a(2130);function N({className:e,classNames:s,showOutsideDays:a=!0,...r}){return(0,t.jsx)(f.hv,{showOutsideDays:a,className:(0,p.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,p.cn)((0,c.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,p.cn)((0,c.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...e})=>(0,t.jsx)(j.A,{className:"h-4 w-4"}),IconRight:({...e})=>(0,t.jsx)(g.A,{className:"h-4 w-4"})},...r})}N.displayName="Calendar";var v=a(2286);let b=v.bL,y=v.l9,A=r.forwardRef(({className:e,align:s="center",sideOffset:a=4,...r},l)=>(0,t.jsx)(v.ZL,{children:(0,t.jsx)(v.UC,{ref:l,align:s,sideOffset:a,className:(0,p.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));function w({date:e,onDateChange:s,placeholder:a="Selecione uma data",className:r}){return(0,t.jsxs)(b,{children:[(0,t.jsx)(y,{asChild:!0,children:(0,t.jsxs)(c.$,{variant:"outline",className:(0,p.cn)("w-full justify-start text-left font-normal",!e&&"text-muted-foreground",r),children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),e?(0,m.GP)(e,"dd/MM/yyyy",{locale:h.F}):(0,t.jsx)("span",{children:a})]})}),(0,t.jsx)(A,{className:"w-auto p-0",children:(0,t.jsx)(N,{mode:"single",selected:e,onSelect:s,initialFocus:!0,locale:h.F})})]})}A.displayName=v.UC.displayName;var E=a(5612),O=a(9867),C=a(3665),R=a(2529),S=a(2056),L=a(1786),D=a(4722),M=a(534),T=a(1169),I=a(4485),P=a(906),k=a(5710),F=a(2263),$=a(1524),B=a(647),Z=a(5921),V=a(5229),_=a(7828);function G({file:e,onFileChange:s,onPreview:a,accept:i,label:n}){let o=(0,r.useRef)(null);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{ref:o,type:"file",accept:i,onChange:e=>{s(e.target.files?.[0]||null)},className:"hidden"}),(0,t.jsx)(l.Zp,{className:"relative border-2 border-dashed border-slate-600 hover:border-slate-500 transition-colors cursor-pointer bg-slate-800/50",onDrop:e=>{e.preventDefault();let a=e.dataTransfer.files?.[0]||null;a&&a.name.endsWith(".xlsx")&&s(a)},onDragOver:e=>{e.preventDefault()},onClick:()=>o.current?.click(),children:(0,t.jsx)("div",{className:"p-6 text-center",children:e?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D.A,{className:"mx-auto h-8 w-8 text-green-400"}),(0,t.jsx)("div",{className:"text-sm font-medium text-green-400",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:[(e.size/1024/1024).toFixed(2)," MB"]}),a&&(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),a(e)},className:"mt-2",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s(null),o.current&&(o.current.value="")},className:"absolute top-2 right-2 h-6 w-6 p-0",children:(0,t.jsx)(V.A,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(L.A,{className:"mx-auto h-8 w-8 text-slate-400"}),(0,t.jsx)("div",{className:"text-sm text-slate-300",children:"Clique ou solte o arquivo aqui"}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:"Arquivo Excel (.xlsx) apenas"})]})})})]})}var U=a(1761),z=a(6617),W=a(2472);function H({data:e,isLoading:s}){let[a,i]=(0,r.useState)(0),[c,n]=(0,r.useState)(0),[o,d]=(0,r.useState)(0),[x,m]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!s&&e){let s=(e,s)=>{if("number"!=typeof e||isNaN(e)||e<0)return void s(0);let a=0,t=Math.max(e/20,1),r=setInterval(()=>{(a+=t)>=e?(s(e),clearInterval(r)):s(Math.floor(a))},50);return r},a=s(e.totalQuantity||0,i),t=s(e.totalValue||0,n),r=s(e.solidCount||0,d),l=s(e.formulasProcessed||0,m);return()=>{a&&clearInterval(a),t&&clearInterval(t),r&&clearInterval(r),l&&clearInterval(l)}}i(0),n(0),d(0),m(0)},[e,s]);let h=[{title:"F\xf3rmulas (dia)",value:s?0:x,subtitle:`${x} processadas • ${a} qty total`,icon:B.A,color:"text-blue-300",bgColor:"bg-blue-500/20",hasSubtitle:!0},{title:"Valor Total",value:`R$ ${(s?0:c||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:U.A,color:"text-green-300",bgColor:"bg-green-500/20"},{title:"S\xf3lidos s/ Sedex",value:s?0:o,icon:z.A,color:"text-orange-300",bgColor:"bg-orange-500/20"},{title:"Melhor Vendedor",value:e.topSeller||"—",icon:W.A,color:"text-purple-300",bgColor:"bg-purple-500/20",isText:!0}];return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((e,s)=>(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,t.jsxs)(l.Zp,{className:"bg-slate-900/90 border-slate-500 hover:bg-slate-900/95 transition-colors shadow-lg",children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-3 px-5 pt-5",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-semibold text-white leading-relaxed",children:e.title}),(0,t.jsx)("div",{className:`p-3 rounded-lg ${e.bgColor} border border-slate-500/20`,children:(0,t.jsx)(e.icon,{className:`h-5 w-5 ${e.color}`})})]}),(0,t.jsxs)(l.Wu,{className:"px-5 pb-5",children:[(0,t.jsx)("div",{className:`text-3xl font-bold ${e.color} leading-relaxed mb-2`,children:(e.isText,e.value)}),e.hasSubtitle?(0,t.jsx)("div",{className:"text-sm text-slate-200 mt-2 leading-relaxed bg-slate-800/30 px-2 py-1 rounded",children:e.subtitle}):!e.isText&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-slate-200 mt-2 leading-relaxed",children:[(0,t.jsx)($.A,{className:"mr-2 h-4 w-4"}),"Processamento atual"]})]})]})},e.title))})}let q=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,p.cn)("w-full caption-bottom text-sm",e),...s})}));q.displayName="Table";let Q=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("thead",{ref:a,className:(0,p.cn)("[&_tr]:border-b",e),...s}));Q.displayName="TableHeader";let X=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tbody",{ref:a,className:(0,p.cn)("[&_tr:last-child]:border-0",e),...s}));X.displayName="TableBody",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tfoot",{ref:a,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let J=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("tr",{ref:a,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));J.displayName="TableRow";let K=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("th",{ref:a,className:(0,p.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));K.displayName="TableHead";let Y=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("td",{ref:a,className:(0,p.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));Y.displayName="TableCell",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("caption",{ref:a,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption";var ee=a(5870),es=a(814),ea=a(6170),et=a(9511);let er=et.bL,el=et.l9,ei=et.ZL;et.bm;let ec=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(et.hJ,{ref:a,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));ec.displayName=et.hJ.displayName;let en=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(ei,{children:[(0,t.jsx)(ec,{}),(0,t.jsxs)(et.UC,{ref:r,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(et.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(V.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));en.displayName=et.UC.displayName;let eo=({className:e,...s})=>(0,t.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});eo.displayName="DialogHeader";let ed=({className:e,...s})=>(0,t.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});ed.displayName="DialogFooter";let ex=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(et.hE,{ref:a,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));ex.displayName=et.hE.displayName;let em=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(et.VY,{ref:a,className:(0,p.cn)("text-sm text-muted-foreground",e),...s}));em.displayName=et.VY.displayName;var eh=a(8720),eu=a(9559),ep=a(6191),ej=a(1010);let eg=["7:00 AS 8:00","10:00 AS 13:00","14:00","15:00","16:00 AS 17:00","OUTROS"],ef=["S\xd3LIDOS","L\xcdQUIDOS","SEMI-S\xd3LIDOS","C\xc1PSULAS","HOMEOPATIA","OUTROS"];function eN({onMetricsUpdate:e,onDailyCapacityUpdate:s,onMetricsApplied:a}){let[o,x]=(0,r.useState)([]),[m,h]=(0,r.useState)({totalCapacity:500,isActive:!0}),[u,p]=(0,r.useState)(!1),[j,g]=(0,r.useState)(null),[f,N]=(0,r.useState)({timeSlot:"",category:"",capacity:0,isActive:!0}),[v,b]=(0,r.useState)(!1),[y,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{w()},[]);let w=async()=>{try{let a=await fetch("/api/production-metrics");if(a.ok){let t=await a.json();x(t.metrics||[]),h(t.dailyCapacity||{totalCapacity:500,isActive:!0}),e?.(t.metrics||[]),s?.(t.dailyCapacity||{totalCapacity:500,isActive:!0})}else E()}catch(e){console.error("Erro ao carregar m\xe9tricas:",e),E()}},E=async()=>{let e=[];eg.forEach(s=>{ef.forEach(a=>{let t=O(s,a);e.push({timeSlot:s,category:a,capacity:t,isActive:!0})})}),x(e),await S(e)},O=(e,s)=>Math.round(({SÓLIDOS:120,LÍQUIDOS:80,"SEMI-S\xd3LIDOS":60,CÁPSULAS:150,HOMEOPATIA:40,OUTROS:50}[s]||50)*(({"7:00 AS 8:00":1,"10:00 AS 13:00":2.5,"14:00":1,"15:00":1,"16:00 AS 17:00":1,OUTROS:.5})[e]||1)),S=async a=>{p(!0);try{let t=await fetch("/api/production-metrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:a,dailyCapacity:m})});if(t.ok){let a=await t.json();x(a.metrics),h(a.dailyCapacity),e?.(a.metrics),s?.(a.dailyCapacity),eh.oR.success("M\xe9tricas salvas com sucesso!")}else eh.oR.error("Erro ao salvar m\xe9tricas")}catch(e){eh.oR.error("Erro ao salvar m\xe9tricas")}finally{p(!1)}},L=async e=>{p(!0);try{let a=await fetch("/api/production-metrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:o,dailyCapacity:e})});if(a.ok){let e=await a.json();h(e.dailyCapacity),s?.(e.dailyCapacity),eh.oR.success("Capacidade di\xe1ria salva!")}else eh.oR.error("Erro ao salvar capacidade di\xe1ria")}catch(e){eh.oR.error("Erro ao salvar capacidade di\xe1ria")}finally{p(!1)}},D=async()=>{A(!0);try{let e=await fetch("/api/history");if(!e.ok)return void eh.oR.error("Erro ao buscar relat\xf3rios");let s=(await e.json()).reports||[];if(0===s.length)return void eh.oR.info("Nenhum relat\xf3rio encontrado para aplicar as m\xe9tricas");eh.oR.success(`M\xe9tricas aplicadas a ${s.length} relat\xf3rios!`),a?.()}catch(e){console.error("Erro ao aplicar m\xe9tricas:",e),eh.oR.error("Erro ao aplicar m\xe9tricas aos relat\xf3rios")}finally{A(!1)}},M=e=>Array.isArray(o)?o.filter(s=>s.timeSlot===e&&s.isActive):[];return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"h-5 w-5"}),"Configura\xe7\xe3o de M\xe9tricas de Produ\xe7\xe3o"]}),(0,t.jsx)(l.BT,{children:"Configure as capacidades de produ\xe7\xe3o por hor\xe1rio e categoria. As m\xe9tricas s\xe3o aplicadas automaticamente a novos relat\xf3rios e podem ser aplicadas retroativamente aos existentes."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{onClick:D,disabled:y||0===o.length,variant:"outline",className:"gap-2",children:[y?(0,t.jsx)(eu.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(I.A,{className:"h-4 w-4"}),y?"Aplicando...":"Aplicar a Todos os Relat\xf3rios"]}),(0,t.jsxs)(er,{open:v,onOpenChange:b,children:[(0,t.jsx)(el,{asChild:!0,children:(0,t.jsxs)(c.$,{className:"gap-2",children:[(0,t.jsx)(ep.A,{className:"h-4 w-4"}),"Nova M\xe9trica"]})}),(0,t.jsxs)(en,{children:[(0,t.jsxs)(eo,{children:[(0,t.jsx)(ex,{children:"Criar Nova M\xe9trica"}),(0,t.jsx)(em,{children:"Configure uma nova capacidade de produ\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Hor\xe1rio"}),(0,t.jsxs)("select",{value:f.timeSlot,onChange:e=>N({...f,timeSlot:e.target.value}),className:"w-full p-2 rounded border bg-slate-700 border-slate-600 text-white",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),eg.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Categoria"}),(0,t.jsxs)("select",{value:f.category,onChange:e=>N({...f,category:e.target.value}),className:"w-full p-2 rounded border bg-slate-700 border-slate-600 text-white",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),ef.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Capacidade (f\xf3rmulas)"}),(0,t.jsx)(ea.p,{type:"number",min:"1",value:f.capacity||"",onChange:e=>N({...f,capacity:parseInt(e.target.value)||0}),className:"bg-slate-700 border-slate-600"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(c.$,{onClick:()=>f.timeSlot&&f.category&&!(f.capacity<=0)?o.some(e=>e.timeSlot===f.timeSlot&&e.category===f.category)?void eh.oR.error("J\xe1 existe uma m\xe9trica para este hor\xe1rio e categoria"):void(S([...o,{...f}]),N({timeSlot:"",category:"",capacity:0,isActive:!0}),b(!1)):void eh.oR.error("Preencha todos os campos corretamente"),className:"flex-1",children:"Criar M\xe9trica"}),(0,t.jsx)(c.$,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Cancelar"})]})]})]})]})]})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)(i.tU,{defaultValue:"daily-capacity",children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-7 mb-6",children:[(0,t.jsx)(i.Xi,{value:"daily-capacity",className:"text-xs font-semibold",children:"Capacidade Di\xe1ria"}),eg.map((e,s)=>(0,t.jsx)(i.Xi,{value:e,className:"text-xs",children:e.replace(" AS ","-")},e))]}),(0,t.jsxs)(i.av,{value:"daily-capacity",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(es.A,{className:"h-4 w-4 text-blue-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Configura\xe7\xe3o de Capacidade Di\xe1ria Total"})]}),(0,t.jsx)(l.Zp,{className:"bg-slate-800 border-slate-700",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{className:"text-white",children:"Capacidade Total do Dia (f\xf3rmulas)"}),(0,t.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Defina o limite m\xe1ximo de f\xf3rmulas que podem ser produzidas por dia"}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(ea.p,{type:"number",min:"1",value:m.totalCapacity,onChange:e=>h({...m,totalCapacity:parseInt(e.target.value)||0}),className:"bg-slate-700 border-slate-600 text-white max-w-xs"}),(0,t.jsxs)(c.$,{onClick:()=>L(m),disabled:u,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Salvar"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"dailyActive",checked:m.isActive,onChange:e=>h({...m,isActive:e.target.checked})}),(0,t.jsx)(n.J,{htmlFor:"dailyActive",children:"Controle de capacidade di\xe1ria ativo"})]}),(0,t.jsxs)("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-2",children:"Como funciona:"}),(0,t.jsxs)("ul",{className:"text-sm text-slate-300 space-y-1",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"Verde:"})," Total abaixo da capacidade (tudo OK)"]})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"Vermelho:"})," Total acima da capacidade (sobrecarga)"]})]})]})]})]})})})]}),eg.map(e=>(0,t.jsxs)(i.av,{value:e,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)($.A,{className:"h-4 w-4 text-blue-400"}),(0,t.jsxs)("h3",{className:"font-semibold text-white",children:["M\xe9tricas para ",e]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[M(e).map((e,s)=>(0,t.jsx)(l.Zp,{className:"bg-slate-800 border-slate-700",children:(0,t.jsxs)(l.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)(d.E,{variant:"outline",className:"text-xs",children:e.category}),(0,t.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>g(e),children:(0,t.jsx)(ej.A,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Capacidade:"}),(0,t.jsxs)("span",{className:"font-bold text-white",children:[e.capacity," f\xf3rmulas"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(R.A,{className:"h-4 w-4 text-green-400"}),(0,t.jsx)("span",{className:"text-xs text-green-400",children:"Ativa"})]})]})]})},s)),0===M(e).length&&(0,t.jsx)("div",{className:"col-span-full text-center py-8 text-slate-400",children:"Nenhuma m\xe9trica configurada para este hor\xe1rio"})]})]},e))]}),j&&(0,t.jsx)(er,{open:!!j,onOpenChange:()=>g(null),children:(0,t.jsxs)(en,{children:[(0,t.jsxs)(eo,{children:[(0,t.jsx)(ex,{children:"Editar M\xe9trica"}),(0,t.jsxs)(em,{children:[j.category," - ",j.timeSlot]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{children:"Capacidade (f\xf3rmulas)"}),(0,t.jsx)(ea.p,{type:"number",min:"1",value:j.capacity,onChange:e=>g({...j,capacity:parseInt(e.target.value)||0}),className:"bg-slate-700 border-slate-600"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",checked:j.isActive,onChange:e=>g({...j,isActive:e.target.checked})}),(0,t.jsx)(n.J,{htmlFor:"isActive",children:"M\xe9trica ativa"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsxs)(c.$,{onClick:()=>{S(o.map(e=>e.id===j.id||e.timeSlot===j.timeSlot&&e.category===j.category?j:e)),g(null)},className:"flex-1",disabled:u,children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Salvar"]}),(0,t.jsx)(c.$,{variant:"outline",onClick:()=>g(null),className:"flex-1",children:"Cancelar"}),(0,t.jsx)(c.$,{variant:"destructive",onClick:()=>{S(o.filter(e=>e.timeSlot!==j.timeSlot||e.category!==j.category)),g(null)},children:"Excluir"})]})]})]})})]})]})}let ev=["7:00 AS 8:00","10:00 AS 13:00","14:00","15:00","16:00 AS 17:00","OUTROS"];function eb({data:e,totalProcessedFormulas:s}){let[a,i]=(0,r.useState)([]),[n,o]=(0,r.useState)({totalCapacity:500,isActive:!0}),[d,x]=(0,r.useState)(!1),m=(e,s)=>0===e?"text-slate-400":e<=s?"text-green-300 bg-green-900/30":"text-red-300 bg-red-900/30",h=(e,s)=>0===e?null:e>s?(0,t.jsx)(S.A,{className:"h-3 w-3 text-red-300 inline ml-1"}):e>0?(0,t.jsx)($.A,{className:"h-3 w-3 text-green-300 inline ml-1"}):null;if(!e||!Array.isArray(e)||0===e.length)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"Relat\xf3rio por Formas Farmac\xeauticas"]}),(0,t.jsx)(l.BT,{children:"Relat\xf3rio com indicadores de performance de produ\xe7\xe3o"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Nenhum dado processado ainda. Fa\xe7a upload dos arquivos e processe-os primeiro."})})]});let u="number"==typeof s?s:e.filter(e=>"item"===e.kind).reduce((e,s)=>e+(s.total||0),0);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(er,{open:d,onOpenChange:x,children:[(0,t.jsx)(el,{asChild:!0,children:(0,t.jsxs)(c.$,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(ee.A,{className:"h-4 w-4"}),"Configurar M\xe9tricas"]})}),(0,t.jsxs)(en,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(eo,{children:[(0,t.jsx)(ex,{children:"Configura\xe7\xe3o de M\xe9tricas de Produ\xe7\xe3o"}),(0,t.jsx)(em,{children:"Configure as capacidades de produ\xe7\xe3o por hor\xe1rio e categoria"})]}),(0,t.jsx)(eN,{onMetricsUpdate:i,onDailyCapacityUpdate:o})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsx)(l.Zp,{className:"bg-gradient-to-r from-blue-900 to-blue-800 border-blue-600",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-100 mb-1",children:"F\xf3rmulas (dia)"}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("span",{className:"text-3xl font-bold text-blue-300",children:s||0})}),(0,t.jsx)("p",{className:"text-sm mt-1 text-slate-300",children:"F\xf3rmulas processadas"})]}),(0,t.jsx)("div",{className:"p-3 rounded-full bg-blue-900/30",children:(0,t.jsx)(D.A,{className:"h-8 w-8 text-blue-300"})})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-r from-slate-800 to-slate-700 border-slate-500",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-100 mb-1",children:"Total de F\xf3rmulas do Dia"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`text-3xl font-bold ${n.isActive&&u>n.totalCapacity?"text-red-300":"text-green-300"}`,children:u}),n.isActive&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-slate-400",children:"de"}),(0,t.jsx)("span",{className:"text-xl font-semibold text-blue-400",children:n.totalCapacity})]})]}),n.isActive&&(0,t.jsx)("p",{className:`text-sm mt-1 ${u>n.totalCapacity?"text-red-400":"text-green-400"}`,children:u>n.totalCapacity?`Sobrecarga: +${u-n.totalCapacity} f\xf3rmulas`:`Dentro da capacidade: ${n.totalCapacity-u} dispon\xedveis`})]}),n.isActive&&(0,t.jsx)("div",{className:`p-3 rounded-full ${u>n.totalCapacity?"bg-red-900/30":"bg-green-900/30"}`,children:u>n.totalCapacity?(0,t.jsx)(S.A,{className:"h-8 w-8 text-red-400"}):(0,t.jsx)($.A,{className:"h-8 w-8 text-green-400"})})]})})}),(0,t.jsx)(l.Zp,{className:"bg-slate-800 border-slate-700",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-100 mb-3",children:"Legenda de Capacidade"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,t.jsx)("span",{className:"text-green-300",children:"OK"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,t.jsx)("span",{className:"text-red-300",children:"Sobrecarga"})]})]})]}),(0,t.jsx)("div",{className:"p-3 rounded-full bg-slate-700/50",children:(0,t.jsx)(es.A,{className:"h-8 w-8 text-slate-300"})})]})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"Relat\xf3rio por Formas Farmac\xeauticas"]}),(0,t.jsx)(l.BT,{children:"Relat\xf3rio com indicadores visuais de performance de produ\xe7\xe3o"})]}),(0,t.jsxs)(l.Wu,{className:"p-6",children:[(0,t.jsx)("div",{className:"rounded-lg border-2 border-slate-600 overflow-x-auto shadow-inner bg-slate-950/50",children:(0,t.jsxs)(q,{children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(J,{className:"bg-slate-800/80 border-b-2 border-slate-600",children:[(0,t.jsx)(K,{className:"sticky left-0 bg-slate-800 z-10 min-w-[250px] text-white font-bold text-sm py-4 px-5 leading-relaxed",children:"FORMA FARMAC\xcaUTICA"}),ev.map((e,s)=>(0,t.jsx)(K,{className:"text-center whitespace-nowrap px-4 py-4 text-slate-100 font-semibold text-sm leading-relaxed",children:e},s)),(0,t.jsx)(K,{className:"text-center font-bold text-white py-4 px-4 text-sm leading-relaxed",children:"TOTAL"})]})}),(0,t.jsxs)(X,{children:[e.map((e,s)=>((e,s)=>{if("section"===e.kind)return(0,t.jsx)(J,{className:"bg-slate-700/40 border-t-2 border-slate-600",children:(0,t.jsx)(Y,{colSpan:ev.length+2,className:"font-bold text-blue-200 py-4 px-5 text-base leading-relaxed bg-gradient-to-r from-slate-700/30 to-slate-600/30",children:e.label})},s);let r="subtotalH"===e.kind||"extra"===e.kind,l=e.label?.includes("TOTAL POR HORARIO"),i="item"===e.kind,c=r?"bg-slate-700/40 font-semibold text-slate-50 border-slate-600":"text-slate-100 hover:text-white";return(0,t.jsxs)(J,{className:r?"bg-slate-700/30 border-t border-slate-600 hover:bg-slate-700/50":"hover:bg-slate-800/50 border-t border-slate-700/50",children:[(0,t.jsx)(Y,{className:`${c} ${r?"font-bold":"font-medium"} py-3 px-5 leading-relaxed`,children:e.label}),ev.map((s,n)=>{let o=e[s]||0,d=null,x="",u=null;if(i&&(d=((e,s)=>{if(!Array.isArray(a))return null;let t=(e=>{let s=e.toUpperCase();return s.includes("CAPSULA")||s.includes("COMPRIMIDO")||s.includes("SACHE")?"S\xd3LIDOS":s.includes("CREME")||s.includes("POMADA")||s.includes("GEL")?"SEMI-S\xd3LIDOS":s.includes("LO\xc7\xc3O")||s.includes("LOCAO")||s.includes("SOLU\xc7\xc3O")?"L\xcdQUIDOS":s.includes("HOMEOPATIA")||s.includes("FLORAL")?"HOMEOPATIA":"OUTROS"})(e);return a.find(e=>e.timeSlot===s&&e.category===t&&e.isActive)||null})(e.label,s))&&o>0&&(x=m(o,d.capacity),u=h(o,d.capacity)),l&&r){let e=Array.isArray(a)?a.find(e=>e.timeSlot===s&&"S\xd3LIDOS"===e.category&&e.isActive):null;e&&o>0&&(x=m(o,e.capacity),u=h(o,e.capacity),d=e)}return(0,t.jsxs)(Y,{className:`text-right font-mono ${c} ${x} relative group py-3 px-4 font-semibold leading-relaxed`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-end",children:[(0,t.jsx)("span",{className:"text-base",children:o}),u]}),d&&o>0&&(0,t.jsx)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-10",children:(0,t.jsxs)("div",{className:"bg-slate-900 text-white text-sm rounded-lg px-3 py-2 shadow-xl border-2 border-slate-600",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Capacidade: ",(0,t.jsx)("span",{className:"text-blue-300",children:d.capacity})]}),(0,t.jsxs)("div",{className:"font-medium",children:["Atual: ",(0,t.jsx)("span",{className:"text-green-300",children:o})]}),(0,t.jsxs)("div",{className:"font-medium",children:["Status: ",(0,t.jsx)("span",{className:o<=d.capacity?"text-green-300":"text-red-300",children:o<=d.capacity?"OK":"Sobrecarga"})]})]})})]},n)}),(0,t.jsx)(Y,{className:`text-right font-mono font-bold ${c} py-3 px-4 text-base leading-relaxed ${r?"bg-slate-600/40":"bg-slate-800/30"}`,children:e.total||0})]},s)})(e,s)),(0,t.jsxs)(J,{className:"bg-slate-700/60 border-t-4 border-slate-500 hover:bg-slate-700/80",children:[(0,t.jsx)(Y,{className:"font-bold text-white py-4 px-5 text-base leading-relaxed",children:"TOTAL DE F\xd3RMULAS DO DIA"}),ev.map((e,s)=>(0,t.jsx)(Y,{className:"text-center py-4 px-4 text-slate-300 font-medium",children:"—"},s)),(0,t.jsx)(Y,{className:"text-right font-bold text-white text-xl py-4 px-4 leading-relaxed bg-slate-600/50",children:u})]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6 p-4 bg-slate-800/40 rounded-lg border border-slate-600",children:[(0,t.jsxs)("div",{className:"text-slate-200 font-medium leading-relaxed",children:[(0,t.jsx)("span",{className:"text-white",children:"Linhas:"})," ",e.length," • ",(0,t.jsx)("span",{className:"text-white",children:"M\xe9tricas ativas:"})," ",Array.isArray(a)?a.filter(e=>e.isActive).length:0]}),(0,t.jsx)("div",{children:n.isActive&&(0,t.jsxs)("span",{className:`text-base font-semibold leading-relaxed ${u>n.totalCapacity?"text-red-300":"text-green-300"}`,children:[(0,t.jsx)("span",{className:"text-slate-200",children:"Capacidade di\xe1ria:"})," ",u,"/",n.totalCapacity]})})]})]})]})]})}var ey=a(6983);function eA({data:e}){if(!e||!e.buckets)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5"}),"Kanban por Hor\xe1rio"]}),(0,t.jsx)(l.BT,{children:"Visualiza\xe7\xe3o organizada por buckets de hor\xe1rio baseada no prot\xf3tipo original"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Dados de Kanban ser\xe3o gerados ap\xf3s o processamento"})})]});let s=e.buckets||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5"}),"Kanban por Hor\xe1rio"]}),(0,t.jsx)(l.BT,{children:"Vis\xe3o r\xe1pida da carga por bucket (baseado no prot\xf3tipo original)"})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:s.map((e,s)=>(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,t.jsxs)(l.Zp,{className:"h-full bg-slate-800/30 border-slate-600",children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(l.ZB,{className:"text-sm font-medium text-slate-200",children:e.title})})}),(0,t.jsx)(l.Wu,{className:"space-y-2",children:0===e.items.length?(0,t.jsx)("div",{className:"text-center py-4 text-slate-500 text-sm",children:"Sem itens"}):(0,t.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:e.items.map((e,a)=>(0,t.jsxs)(E.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*s+.05*a},className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600 hover:bg-slate-700/70 transition-colors",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-200 mb-2",children:e.title}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["Qtd: ",(0,t.jsx)("span",{className:"text-blue-400 font-mono",children:e.count})]})]},a))})})]})},e.title))}),(0,t.jsxs)(l.Zp,{className:"bg-slate-800/30",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(z.A,{className:"h-4 w-4"}),"Resumo por Hor\xe1rio"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.map(e=>{let s=e.items.reduce((e,s)=>e+s.count,0),a=e.items.length;return(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-300",children:e.title}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["Tipos: ",(0,t.jsx)("span",{className:"text-slate-200",children:a})]}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["Total: ",(0,t.jsx)("span",{className:"text-blue-400",children:s})]})]})]},e.title)})})})]})]})}var ew=a(9484);let eE=r.forwardRef(({className:e,value:s,...a},r)=>(0,t.jsx)(ew.bL,{ref:r,className:(0,p.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:(0,t.jsx)(ew.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));function eO({data:e}){if(!e||!Array.isArray(e)||0===e.length)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-5 w-5"}),"M\xe9tricas por Vendedor"]}),(0,t.jsx)(l.BT,{children:"Desempenho individual dos vendedores (baseado no prot\xf3tipo)"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Dados de vendedores ser\xe3o exibidos ap\xf3s o processamento"})})]});let s=Math.max(...e.map(e=>e.value));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-5 w-5"}),"M\xe9tricas por Vendedor"]}),(0,t.jsxs)(l.BT,{children:["Desempenho de ",e.length," vendedores (maior valor define o TOP)"]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/20",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(W.A,{className:"h-8 w-8 text-yellow-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-300",children:"TOP Vendedor"}),(0,t.jsx)("div",{className:"font-bold text-yellow-400",children:e[0]?.name||"—"}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["R$ ",(e[0]?.value||0).toFixed(2)]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)($.A,{className:"h-8 w-8 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-300",children:"Maior Volume"}),(0,t.jsx)("div",{className:"font-bold text-blue-400",children:e.reduce((e,s)=>s.qty>e.qty?s:e,e[0]||{qty:0,name:"—"}).name}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:[e.reduce((e,s)=>s.qty>e.qty?s:e,e[0]||{qty:0}).qty," f\xf3rmulas"]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(U.A,{className:"h-8 w-8 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-300",children:"Valor M\xe9dio"}),(0,t.jsxs)("div",{className:"font-bold text-green-400",children:["R$ ",e.length>0?(e.reduce((e,s)=>e+s.value,0)/e.length).toFixed(2):"0.00"]}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:"Por vendedor"})]})]})})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,a)=>(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:(0,t.jsxs)(l.Zp,{className:"bg-slate-800/30 border-slate-600 hover:bg-slate-800/50 transition-colors",children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.ZB,{className:"text-sm font-medium truncate",children:e.name}),(0,t.jsxs)(d.E,{variant:"outline",className:"text-xs",children:["#",a+1]})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Valor Total"}),(0,t.jsxs)("span",{className:"text-green-400 font-mono",children:["R$ ",e.value.toFixed(2)]})]}),(0,t.jsx)(eE,{value:e.value/s*100,className:"h-1.5"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-slate-400",children:"Quantidade"}),(0,t.jsx)("div",{className:"text-blue-400 font-mono font-bold",children:e.qty})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-slate-400",children:"M\xe9dia/F\xf3rmula"}),(0,t.jsxs)("div",{className:"text-green-400 font-mono font-bold",children:["R$ ",e.avg.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-slate-400",children:"Ticket M\xe9dio"}),(0,t.jsxs)("div",{className:"text-purple-400 font-mono font-bold",children:["R$ ",(e.value/e.qty).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-slate-400",children:"Performance"}),(0,t.jsxs)("div",{className:"text-orange-400 font-mono font-bold",children:[(e.value/s*100).toFixed(0),"%"]})]})]})]})]})},e.name))})]})}eE.displayName=ew.bL.displayName;var eC=a(8629),eR=a(4033),eS=a(2108),eL=a(5917);let eD=eC.bL;eC.YJ;let eM=eC.WT,eT=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(eC.l9,{ref:r,className:(0,p.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,(0,t.jsx)(eC.In,{asChild:!0,children:(0,t.jsx)(eR.A,{className:"h-4 w-4 opacity-50"})})]}));eT.displayName=eC.l9.displayName;let eI=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eC.PP,{ref:a,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(eS.A,{className:"h-4 w-4"})}));eI.displayName=eC.PP.displayName;let eP=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eC.wn,{ref:a,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(eR.A,{className:"h-4 w-4"})}));eP.displayName=eC.wn.displayName;let ek=r.forwardRef(({className:e,children:s,position:a="popper",...r},l)=>(0,t.jsx)(eC.ZL,{children:(0,t.jsxs)(eC.UC,{ref:l,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[(0,t.jsx)(eI,{}),(0,t.jsx)(eC.LM,{className:(0,p.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(eP,{})]})}));ek.displayName=eC.UC.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eC.JU,{ref:a,className:(0,p.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=eC.JU.displayName;let eF=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(eC.q7,{ref:r,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(eC.VF,{children:(0,t.jsx)(eL.A,{className:"h-4 w-4"})})}),(0,t.jsx)(eC.p4,{children:s})]}));eF.displayName=eC.q7.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eC.wv,{ref:a,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=eC.wv.displayName;var e$=a(8162);let eB=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(e$.bL,{ref:a,className:(0,p.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,t.jsx)(e$.C1,{className:(0,p.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(eL.A,{className:"h-4 w-4"})})}));eB.displayName=e$.bL.displayName;var eZ=a(1360),eV=a(3581);function e_({onViewHistoricalReport:e}){let[s,a]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,x]=(0,r.useState)("month"),[p,j]=(0,r.useState)(void 0),[g,f]=(0,r.useState)(void 0),[N,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(1),[A,C]=(0,r.useState)(31),[R,S]=(0,r.useState)(String(new Date().getMonth()+1).padStart(2,"0")),[L,M]=(0,r.useState)(!1),[T,P]=(0,r.useState)(new Set),[k,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{$()},[]),(0,r.useEffect)(()=>{"custom"!==o&&$()},[o]),(0,r.useEffect)(()=>{N&&p&&g&&$()},[p,g,N]),(0,r.useEffect)(()=>{L&&$()},[b,A,R,L]);let $=async()=>{try{n(!0);let e=new URLSearchParams;L?(e.append("startDay",b.toString()),e.append("endDay",A.toString()),e.append("month",R)):N&&p&&g?(e.append("startDate",p.toISOString()),e.append("endDate",g.toISOString())):e.append("period",o);let s=await fetch(`/api/history?${e.toString()}`),t=await s.json();if(s.ok){let e=(t.reports||[]).sort((e,s)=>{let a=new Date().getFullYear(),t=e=>{let[s,t]=e.split("/").map(Number);return new Date(a,t-1,s)};try{let a=t(e.date),r=t(s.date).getTime()-a.getTime();if(0===r)return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime();return r}catch(a){return console.warn("Erro ao parsear data do relat\xf3rio:",{a:e.date,b:s.date}),new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()}});a(e),P(new Set)}}catch(e){console.error("Error fetching history:",e)}finally{n(!1)}},B=async e=>{if(confirm("Tem certeza que deseja excluir este relat\xf3rio?"))try{(await fetch(`/api/history/${e}`,{method:"DELETE"})).ok&&(a(s=>s.filter(s=>s.id!==e)),P(s=>{let a=new Set(s);return a.delete(e),a}))}catch(e){console.error("Error deleting report:",e)}},Z=async()=>{if(0!==T.size&&confirm(T.size===s.length?"Tem certeza que deseja excluir TODOS os relat\xf3rios?":`Tem certeza que deseja excluir ${T.size} relat\xf3rio(s) selecionado(s)?`)){F(!0);try{let e=Array.from(T).map(e=>fetch(`/api/history/${e}`,{method:"DELETE"})),s=(await Promise.all(e)).filter(e=>e.ok).length;s>0&&(a(e=>e.filter(e=>!T.has(e.id))),P(new Set)),s<T.size&&alert(`${s} de ${T.size} relat\xf3rios foram exclu\xeddos. Alguns podem ter falhado.`)}catch(e){console.error("Error deleting selected reports:",e),alert("Erro ao excluir relat\xf3rios selecionados.")}finally{F(!1)}}},G=T.size===s.length&&s.length>0,U=T.size>0&&T.size<s.length,z=async s=>{e?e(s.id,s.date):window.open(`/dashboard/report/${s.id}`,"_blank")},W=async e=>{try{let s=await fetch(`/api/export-history/${e}`);if(s.ok){let a=await s.blob(),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`relatorio_${e}.xlsx`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}}catch(e){console.error("Error exporting report:",e)}},H=e=>{x(e),"custom"===e?(v(!0),M(!1)):("dayRange"===e?(M(!0),v(!1)):(v(!1),M(!1)),j(void 0),f(void 0))},ee=()=>{switch(o){case"today":return"Hoje";case"week":return"\xdaltima semana";case"month":default:return"M\xeas atual";case"all":return"Todos os per\xedodos";case"custom":return"Per\xedodo personalizado";case"dayRange":return`Dias ${b} a ${A}/${R}`}};return i?(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-5 w-5"}),"Hist\xf3rico de Relat\xf3rios"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-slate-400",children:"Carregando hist\xf3rico..."})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-5 w-5"}),"Hist\xf3rico de Relat\xf3rios"]}),(0,t.jsxs)(l.BT,{children:[s.length," relat\xf3rios salvos - ",ee()," ",s.length>8&&"(com scroll)",T.size>0&&(0,t.jsxs)("span",{className:"ml-2 text-blue-600 font-medium",children:["(",T.size," selecionados)"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[T.size>0&&(0,t.jsx)(c.$,{variant:"destructive",size:"sm",onClick:Z,disabled:k,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Excluindo..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Excluir (",T.size,")"]})}),(0,t.jsx)(c.$,{variant:"outline",onClick:$,children:"Atualizar"})]})]})})}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(eV.A,{className:"h-5 w-5"}),"Filtros de Per\xedodo"]}),(0,t.jsx)(l.BT,{children:"Filtre os relat\xf3rios por data para encontrar rapidamente o que precisa"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-3 block",children:"Filtros r\xe1pidos"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:[(0,t.jsx)(c.$,{variant:"today"===o?"default":"outline",size:"sm",onClick:()=>H("today"),className:"justify-center",children:"Hoje"}),(0,t.jsx)(c.$,{variant:"week"===o?"default":"outline",size:"sm",onClick:()=>H("week"),className:"justify-center",children:"7 dias"}),(0,t.jsx)(c.$,{variant:"month"===o?"default":"outline",size:"sm",onClick:()=>H("month"),className:"justify-center",children:"M\xeas atual"}),(0,t.jsx)(c.$,{variant:"dayRange"===o?"default":"outline",size:"sm",onClick:()=>H("dayRange"),className:"justify-center",children:"Por dias"}),(0,t.jsx)(c.$,{variant:"custom"===o?"default":"outline",size:"sm",onClick:()=>H("custom"),className:"justify-center",children:"Personalizado"}),(0,t.jsx)(c.$,{variant:"all"===o?"default":"outline",size:"sm",onClick:()=>H("all"),className:"justify-center",children:"Todos"})]})]}),N&&(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg bg-blue-50/50 border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("h4",{className:"font-medium text-blue-900",children:"Per\xedodo personalizado"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block text-slate-700",children:"Data inicial"}),(0,t.jsx)(w,{date:p,onDateChange:j,placeholder:"Selecione a data inicial",className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block text-slate-700",children:"Data final"}),(0,t.jsx)(w,{date:g,onDateChange:f,placeholder:"Selecione a data final",className:"w-full"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[p&&g&&(0,t.jsxs)("p",{className:"text-sm text-blue-700 font-medium",children:["Per\xedodo: ",(0,m.GP)(p,"dd/MM/yyyy",{locale:h.F})," at\xe9 ",(0,m.GP)(g,"dd/MM/yyyy",{locale:h.F})]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{j(void 0),f(void 0),v(!1),x("month")},children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Limpar"]})]})]}),L&&(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg bg-green-50/50 border-green-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("h4",{className:"font-medium text-green-900",children:"Filtro por intervalo de dias"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block text-slate-700",children:"M\xeas"}),(0,t.jsxs)(eD,{value:R,onValueChange:S,children:[(0,t.jsx)(eT,{children:(0,t.jsx)(eM,{placeholder:"Selecione o m\xeas"})}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(eF,{value:"01",children:"Janeiro"}),(0,t.jsx)(eF,{value:"02",children:"Fevereiro"}),(0,t.jsx)(eF,{value:"03",children:"Mar\xe7o"}),(0,t.jsx)(eF,{value:"04",children:"Abril"}),(0,t.jsx)(eF,{value:"05",children:"Maio"}),(0,t.jsx)(eF,{value:"06",children:"Junho"}),(0,t.jsx)(eF,{value:"07",children:"Julho"}),(0,t.jsx)(eF,{value:"08",children:"Agosto"}),(0,t.jsx)(eF,{value:"09",children:"Setembro"}),(0,t.jsx)(eF,{value:"10",children:"Outubro"}),(0,t.jsx)(eF,{value:"11",children:"Novembro"}),(0,t.jsx)(eF,{value:"12",children:"Dezembro"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block text-slate-700",children:"Dia inicial"}),(0,t.jsx)(ea.p,{type:"number",min:"1",max:"31",value:b,onChange:e=>y(parseInt(e.target.value)||1),placeholder:"1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block text-slate-700",children:"Dia final"}),(0,t.jsx)(ea.p,{type:"number",min:"1",max:"31",value:A,onChange:e=>C(parseInt(e.target.value)||31),placeholder:"31"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-green-700 font-medium",children:["Per\xedodo: ",b," ao ",A," de ",["","Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][parseInt(R)]]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{M(!1),y(1),C(31),S(String(new Date().getMonth()+1).padStart(2,"0")),x("month")},children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Limpar"]})]})]}),"all"!==o&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-100 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-slate-700",children:["Filtro ativo: ",(0,t.jsx)("span",{className:"text-blue-600",children:ee()})]})]}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>H("all"),className:"text-slate-500 hover:text-slate-700",children:"Mostrar todos"})]})]})})]}),0===s.length?(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"text-center py-8",children:[(0,t.jsx)(D.A,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"Nenhum relat\xf3rio salvo"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Processe alguns dados e salve-os para v\xea-los aqui"})]})}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-0",children:(0,t.jsxs)("div",{className:`overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800 ${s.length>8?"max-h-96":"max-h-full"}`,children:[(0,t.jsx)("div",{className:"rounded-md border border-slate-700",children:(0,t.jsx)(q,{children:(0,t.jsx)(Q,{className:"sticky top-0 z-10 bg-slate-900",children:(0,t.jsxs)(J,{className:"bg-slate-800/70 border-b-2 border-slate-600",children:[(0,t.jsx)(K,{className:"w-12 py-4 px-4",children:(0,t.jsx)(eB,{checked:G,onCheckedChange:e=>{e?P(new Set(s.map(e=>e.id))):P(new Set)},className:U?"data-[state=checked]:bg-blue-600":""})}),(0,t.jsx)(K,{className:"text-white font-bold py-4 px-4 leading-relaxed",children:"T\xedtulo"}),(0,t.jsx)(K,{className:"text-white font-bold py-4 px-4 leading-relaxed",children:"Data"}),(0,t.jsx)(K,{className:"text-white font-bold py-4 px-4 leading-relaxed",children:"Status"}),(0,t.jsx)(K,{className:"text-right text-white font-bold py-4 px-4 leading-relaxed",children:"Quantidade"}),(0,t.jsx)(K,{className:"text-right text-white font-bold py-4 px-4 leading-relaxed",children:"Valor"}),(0,t.jsx)(K,{className:"text-white font-bold py-4 px-4 leading-relaxed",children:"Top Vendedor"}),(0,t.jsx)(K,{className:"text-white font-bold py-4 px-4 leading-relaxed",children:"Criado em"}),(0,t.jsx)(K,{className:"text-center text-white font-bold py-4 px-4 leading-relaxed",children:"A\xe7\xf5es"})]})})})}),(0,t.jsx)("div",{className:"border-l border-r border-b border-slate-700 rounded-b-md",children:(0,t.jsx)(q,{children:(0,t.jsx)(X,{children:s.map((e,s)=>(0,t.jsxs)(E.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Math.min(.05*s,.5)},className:"hover:bg-slate-800/50 border-b border-slate-700/50 last:border-b-0 transition-colors duration-200",children:[(0,t.jsx)(Y,{className:"w-12 py-4 px-4",children:(0,t.jsx)(eB,{checked:T.has(e.id),onCheckedChange:s=>{var a;return a=e.id,void P(e=>{let t=new Set(e);return s?t.add(a):t.delete(a),t})}})}),(0,t.jsx)(Y,{className:"font-semibold text-slate-100 py-4 px-4 leading-relaxed",children:e.title}),(0,t.jsx)(Y,{className:"py-4 px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-slate-300"}),(0,t.jsx)("span",{className:"text-slate-200 font-medium",children:e.date})]})}),(0,t.jsx)(Y,{className:"py-4 px-4",children:(0,t.jsxs)(d.E,{variant:"completed"===e.status?"default":"error"===e.status?"destructive":"secondary",className:"font-medium",children:["completed"===e.status&&"Completo","processing"===e.status&&"Processando","error"===e.status&&"Erro"]})}),(0,t.jsx)(Y,{className:"text-right font-mono text-slate-100 font-semibold py-4 px-4 leading-relaxed",children:e.totalQuantity}),(0,t.jsxs)(Y,{className:"text-right font-mono text-green-300 font-semibold py-4 px-4 leading-relaxed",children:["R$ ",(e.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsx)(Y,{className:"text-slate-200 font-medium py-4 px-4 leading-relaxed",children:e.topSeller||"—"}),(0,t.jsx)(Y,{className:"text-slate-300 py-4 px-4 leading-relaxed",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),(0,t.jsx)(Y,{className:"py-4 px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>z(e),title:"Visualizar relat\xf3rio",className:"hover:bg-blue-500/20 hover:text-blue-300 text-slate-300 h-9 w-9",children:(0,t.jsx)(_.A,{className:"h-4 w-4"})}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>W(e.id),title:"Exportar relat\xf3rio",className:"hover:bg-green-500/20 hover:text-green-300 text-slate-300 h-9 w-9",children:(0,t.jsx)(O.A,{className:"h-4 w-4"})}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>B(e.id),title:"Excluir relat\xf3rio",className:"text-red-400 hover:text-red-300",children:(0,t.jsx)(eZ.A,{className:"h-4 w-4"})})]})})]},e.id))})})})]})})})]})}var eG=a(4517);function eU({isOpen:e,onClose:s,file:a,onConfirm:l}){let[i,n]=(0,r.useState)(null),[o,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),u=async()=>{if(a){x(!0),h(null);try{let e=new FormData;e.append("file",a);let s=await fetch("/api/preview-excel",{method:"POST",body:e}),t=await s.json();t.success?n(t.data):(h(t.error||"Erro ao processar arquivo"),eG.oR.error(t.error||"Erro ao processar arquivo"))}catch(s){let e="Erro ao fazer preview do arquivo";h(e),eG.oR.error(e),console.error("Erro no preview:",s)}finally{x(!1)}}};return(0,r.useEffect)(()=>{e&&a&&(n(null),h(null),u())},[e,a]),(0,t.jsx)(er,{open:e,onOpenChange:s,children:(0,t.jsxs)(en,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(eo,{children:[(0,t.jsxs)(ex,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"Preview do Arquivo Excel"]}),(0,t.jsx)(em,{children:"Visualize os dados antes de processar o arquivo"})]}),o&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,t.jsx)("span",{className:"ml-2",children:"Carregando preview..."})]}),m&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsx)("p",{className:"text-red-800",children:m})}),i&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Informa\xe7\xf5es do Arquivo"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Nome:"})," ",i.fileName]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Tipo:"})," ",(e=>{switch(e){case"diario_receitas":return(0,t.jsx)(d.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Di\xe1rio de Receitas"});case"relatorio_controle":return(0,t.jsx)(d.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Relat\xf3rio de Controle"});default:return(0,t.jsx)(d.E,{variant:"outline",children:"Tipo n\xe3o identificado"})}})(i.fileType)]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Planilha:"})," ",i.sheetName]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Total de linhas:"})," ",i.totalRows]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-4 py-2 border-b",children:(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),"Preview dos Dados (primeiras 5 linhas)"]})}),(0,t.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,t.jsxs)(q,{children:[(0,t.jsx)(Q,{children:(0,t.jsx)(J,{children:i.headers.map((e,s)=>(0,t.jsx)(K,{className:"whitespace-nowrap",children:e||`Coluna ${s+1}`},s))})}),(0,t.jsx)(X,{children:i.sampleRows.map((e,s)=>(0,t.jsx)(J,{children:e.map((e,s)=>(0,t.jsx)(Y,{className:"whitespace-nowrap",children:e||"-"},s))},s))})]})})]}),i.totalRows>5&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["... e mais ",i.totalRows-5," linhas"]})]}),(0,t.jsxs)(ed,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:s,children:"Cancelar"}),(0,t.jsxs)(c.$,{onClick:()=>{a&&(l(a),s())},disabled:!i||o,className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),"Processar Arquivo"]})]})]})})}let ez=[{value:"CAPSULAS PRONTAS",label:"C\xe1psulas Prontas",group:"S\xd3LIDOS"},{value:"CAPSULAS",label:"C\xe1psulas",group:"S\xd3LIDOS"},{value:"CAPSULAS GASTRO",label:"C\xe1psulas Gastro",group:"S\xd3LIDOS"},{value:"SACHES",label:"Sach\xeas",group:"S\xd3LIDOS"},{value:"MATERIA PRIMA",label:"Mat\xe9ria Prima",group:"S\xd3LIDOS"},{value:"GEL TRANSDERMICO, GEL VAGINAL",label:"Gel Transd\xe9rmico/Vaginal",group:"DERMATO A"},{value:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",label:"Cremes e Lo\xe7\xf5es",group:"DERMATO A"},{value:"BASE SERUM",label:"Base Serum",group:"DERMATO A"},{value:"SHOT",label:"Shot",group:"DERMATO A"},{value:"SOLU\xc7\xc3O, XAROPE, ESMALTE",label:"Solu\xe7\xe3o/Xarope/Esmalte",group:"DERMATO A"},{value:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",label:"Produtos Capilares",group:"DERMATO A"},{value:"LO\xc7\xc3O CAPILAR, LO\xc7\xc3O CAPILAR \xd1 ALCOOLICA",label:"Lo\xe7\xe3o Capilar",group:"DERMATO A"},{value:"GEL , GEL ACQUAGEL, GEL ALCOOLICO, GEL CREME, GEL DE AMIGEL, GEL FLUIDO, GEL NATROSOL, GEL SEPIGEL",label:"G\xe9is Diversos",group:"DERMATO A"},{value:"GEL COMESTIVEL",label:"Gel Comest\xedvel",group:"DERMATO A"},{value:"LIQUID CAPS",label:"Liquid Caps",group:"DERMATO C"},{value:"CAPSULAS VAGINAIS",label:"C\xe1psulas Vaginais",group:"DERMATO C"},{value:"GOMAS",label:"Gomas",group:"DERMATO C"},{value:"PASTILHAS",label:"Pastilhas",group:"DERMATO C"},{value:"BOMBOM",label:"Bombom",group:"DERMATO C"},{value:"FILMES",label:"Filmes",group:"DERMATO C"},{value:"OVULOS",label:"\xd3vulos",group:"DERMATO C"},{value:"FILME VAGINAL",label:"Filme Vaginal",group:"DERMATO C"},{value:"HOMEOPATIA, FLORAL E VEICULO",label:"Homeopatia/Floral/Ve\xedculo",group:"DERMATO C"}];function eW({unmappedData:e,onApplyMappings:s,isProcessing:a,showMappingOnly:i=!1}){let[n,o]=(0,r.useState)({}),[m,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(e&&e.length>0){let s={};e.forEach(e=>{let a=e.forma?.toString().toUpperCase().trim()||"INDEFINIDO";s[a]=(s[a]||0)+1}),h(Object.entries(s).map(([e,s])=>({forma:e,ocorrencias:s})))}else h([])},[e]);let u=()=>Object.keys(n).length;return 0===m.length?(0,t.jsxs)(x.Fc,{children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)(x.TN,{children:"Todos os itens foram mapeados com sucesso. Nenhuma a\xe7\xe3o manual necess\xe1ria."})]}):(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-amber-500"}),i?"Itens sem mapeamento":"Sem mapeamento"]}),(0,t.jsx)(l.BT,{children:i?`${m.length} item(s) n\xe3o foram mapeados durante o processamento por per\xedodo. Configure o mapeamento no arquivo JSON para processamentos futuros.`:`Selecione a categoria alvo para cada termo (${u()}/${m.length} selecionados)`})]}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"rounded-lg border overflow-hidden",children:(0,t.jsxs)(q,{children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(J,{className:"bg-gray-50",children:[(0,t.jsx)(K,{className:"font-semibold",children:"Forma (normalizada)"}),(0,t.jsx)(K,{className:"font-semibold text-center",children:"Ocorr\xeancias"}),(0,t.jsx)(K,{className:"font-semibold",children:"Categoria destino"})]})}),(0,t.jsx)(X,{children:m.map((e,s)=>(0,t.jsxs)(J,{className:"hover:bg-gray-50",children:[(0,t.jsx)(Y,{className:"font-medium",children:e.forma}),(0,t.jsx)(Y,{className:"text-center",children:(0,t.jsx)(d.E,{variant:"secondary",children:e.ocorrencias})}),(0,t.jsx)(Y,{children:i?(0,t.jsx)(d.E,{variant:"outline",className:"text-amber-600 border-amber-300",children:"N\xe3o mapeado"}):(0,t.jsxs)(eD,{value:n[e.forma]||"",onValueChange:s=>{var a;return a=e.forma,void o(e=>({...e,[a]:s}))},children:[(0,t.jsx)(eT,{className:"w-full",children:(0,t.jsx)(eM,{placeholder:"-- escolher --"})}),(0,t.jsx)(ek,{children:ez.map(e=>(0,t.jsx)(eF,{value:e.value,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.group})]})},e.value))})]})})]},s))})]})}),!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,t.jsxs)(c.$,{variant:"outline",onClick:()=>{o({}),eG.oR.success("Sele\xe7\xe3o limpa")},disabled:0===Object.keys(n).length||a,className:"flex items-center gap-2",children:[(0,t.jsx)(eZ.A,{className:"h-4 w-4"}),"Limpar sele\xe7\xe3o"]}),(0,t.jsxs)(c.$,{onClick:()=>{if(0===Object.keys(n).length)return void eG.oR.error("Selecione pelo menos uma categoria para aplicar");s&&(s(n),eG.oR.success(`${Object.keys(n).length} mapeamento(s) aplicado(s)`))},disabled:0===Object.keys(n).length||a,className:"flex items-center gap-2",children:[(0,t.jsx)(eu.A,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Aplicar mapeamentos e reprocessar"]})]}),u()>0&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:u()}),' item(s) selecionado(s) para mapeamento. Clique em "Aplicar mapeamentos e reprocessar" para salvar as altera\xe7\xf5es.']})})]}),i&&(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:(0,t.jsx)("p",{className:"text-sm text-amber-800",children:"Estes itens n\xe3o foram mapeados durante o processamento por per\xedodo. Configure o mapeamento JSON antes de processar novos arquivos para evitar este problema."})})]})]})}var eH=a(3511),eq=a(6667),eQ=a(6651),eX=a(7666);let eJ=[{value:"CAPSULAS PRONTAS",label:"C\xe1psulas Prontas",group:"S\xd3LIDOS"},{value:"CAPSULAS",label:"C\xe1psulas",group:"S\xd3LIDOS"},{value:"CAPSULAS GASTRO",label:"C\xe1psulas Gastro",group:"S\xd3LIDOS"},{value:"SACHES",label:"Sach\xeas",group:"S\xd3LIDOS"},{value:"MATERIA PRIMA",label:"Mat\xe9ria Prima",group:"S\xd3LIDOS"},{value:"GEL TRANSDERMICO, GEL VAGINAL",label:"Gel Transd\xe9rmico/Vaginal",group:"DERMATO A"},{value:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",label:"Cremes e Lo\xe7\xf5es",group:"DERMATO A"},{value:"BASE SERUM",label:"Base Serum",group:"DERMATO A"},{value:"SHOT",label:"Shot",group:"DERMATO A"},{value:"SOLU\xc7\xc3O, XAROPE, ESMALTE",label:"Solu\xe7\xe3o/Xarope/Esmalte",group:"DERMATO A"},{value:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",label:"Produtos Capilares",group:"DERMATO A"},{value:"LO\xc7\xc3O CAPILAR, LO\xc7\xc3O CAPILAR \xd1 ALCOOLICA",label:"Lo\xe7\xe3o Capilar",group:"DERMATO A"},{value:"GEL , GEL ACQUAGEL, GEL ALCOOLICO, GEL CREME, GEL DE AMIGEL, GEL FLUIDO, GEL NATROSOL, GEL SEPIGEL",label:"G\xe9is Diversos",group:"DERMATO A"},{value:"GEL COMESTIVEL",label:"Gel Comest\xedvel",group:"DERMATO A"},{value:"LIQUID CAPS",label:"Liquid Caps",group:"DERMATO C"},{value:"CAPSULAS VAGINAIS",label:"C\xe1psulas Vaginais",group:"DERMATO C"},{value:"GOMAS",label:"Gomas",group:"DERMATO C"},{value:"PASTILHAS",label:"Pastilhas",group:"DERMATO C"},{value:"BOMBOM",label:"Bombom",group:"DERMATO C"},{value:"FILMES",label:"Filmes",group:"DERMATO C"},{value:"OVULOS",label:"\xd3vulos",group:"DERMATO C"},{value:"FILME VAGINAL",label:"Filme Vaginal",group:"DERMATO C"},{value:"HOMEOPATIA, FLORAL E VEICULO",label:"Homeopatia/Floral/Ve\xedculo",group:"DERMATO C"}],eK={CAPSULA:{category:"CAPSULAS",confidence:.9},CAPS:{category:"CAPSULAS",confidence:.8},GASTRO:{category:"CAPSULAS GASTRO",confidence:.95},PRONTAS:{category:"CAPSULAS PRONTAS",confidence:.95},SACHE:{category:"SACHES",confidence:.95},MATERIA:{category:"MATERIA PRIMA",confidence:.9},PRIMA:{category:"MATERIA PRIMA",confidence:.8},GEL:{category:"GEL , GEL ACQUAGEL, GEL ALCOOLICO, GEL CREME, GEL DE AMIGEL, GEL FLUIDO, GEL NATROSOL, GEL SEPIGEL",confidence:.8},TRANSDERMICO:{category:"GEL TRANSDERMICO, GEL VAGINAL",confidence:.95},VAGINAL:{category:"GEL TRANSDERMICO, GEL VAGINAL",confidence:.95},COMESTIVEL:{category:"GEL COMESTIVEL",confidence:.95},CREME:{category:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",confidence:.85},LOCAO:{category:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",confidence:.85},LOÇÃO:{category:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",confidence:.85},POMADA:{category:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",confidence:.85},CAPILAR:{category:"LO\xc7\xc3O CAPILAR, LO\xc7\xc3O CAPILAR \xd1 ALCOOLICA",confidence:.9},SERUM:{category:"BASE SERUM",confidence:.95},SHOT:{category:"SHOT",confidence:.95},SOLUCAO:{category:"SOLU\xc7\xc3O, XAROPE, ESMALTE",confidence:.8},SOLUÇÃO:{category:"SOLU\xc7\xc3O, XAROPE, ESMALTE",confidence:.8},XAROPE:{category:"SOLU\xc7\xc3O, XAROPE, ESMALTE",confidence:.9},ESMALTE:{category:"SOLU\xc7\xc3O, XAROPE, ESMALTE",confidence:.9},SHAMPOO:{category:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",confidence:.85},SABONETE:{category:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",confidence:.85},CONDICIONADOR:{category:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",confidence:.9},LIQUID:{category:"LIQUID CAPS",confidence:.9},GOMA:{category:"GOMAS",confidence:.95},PASTILHA:{category:"PASTILHAS",confidence:.95},BOMBOM:{category:"BOMBOM",confidence:.95},FILME:{category:"FILMES",confidence:.8},OVULO:{category:"OVULOS",confidence:.95},ÓVULO:{category:"OVULOS",confidence:.95},HOMEOPATIA:{category:"HOMEOPATIA, FLORAL E VEICULO",confidence:.9},FLORAL:{category:"HOMEOPATIA, FLORAL E VEICULO",confidence:.9},VEICULO:{category:"HOMEOPATIA, FLORAL E VEICULO",confidence:.8}};function eY(e){return e.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function e0(e,s){let a=eY(e),t=eY(s);if(a===t)return 1;if(0===a.length||0===t.length)return 0;if(a.includes(t)||t.includes(a))return .7;let r=a.split(" "),l=t.split(" "),i=r.filter(e=>l.includes(e));return i.length>0?.4+i.length/Math.max(r.length,l.length)*.3:0}var e1=a(2659);let e2="https://yhtnlxnntpipnshtivqx.supabase.co",e4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlodG5seG5udHBpcG5zaHRpdnF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMzQxNDksImV4cCI6MjA3MTkxMDE0OX0.MdE9PWSWFFLMcudTw40lehT2HXiG-S6S4gfWfod0mVM";e2&&e4||console.error("❌ Vari\xe1veis de ambiente do Supabase n\xe3o configuradas:",{url:!!e2,key:!!e4});let e5=(0,e1.UU)(e2,e4);class e3{static async getUserMappings(e){try{if(!e||""===e.trim())return console.error("getUserMappings: userId \xe9 obrigat\xf3rio"),{};if(!e2||!e4)return console.error("getUserMappings: Vari\xe1veis de ambiente do Supabase n\xe3o configuradas"),{};let{data:s,error:a}=await e5.from("form_mappings").select("original_form, mapped_category").eq("user_id",e);if(a)return console.error("Erro ao buscar mapeamentos do usu\xe1rio:",{message:a.message,details:a.details,hint:a.hint,code:a.code,userId:e}),"PGRST116"===a.code?console.error("Tabela form_mappings n\xe3o encontrada no banco de dados"):"42501"===a.code&&console.error("Permiss\xf5es insuficientes para acessar form_mappings"),{};if(!s||!Array.isArray(s))return console.warn("getUserMappings: Nenhum dado retornado do Supabase"),{};let t={};return s.forEach(e=>{e&&e.original_form&&e.mapped_category&&(t[e.original_form]=e.mapped_category)}),console.log(`getUserMappings: Encontrados ${Object.keys(t).length} mapeamentos para usu\xe1rio ${e}`),t}catch(e){return console.error("Erro inesperado ao buscar mapeamentos do usu\xe1rio:",e),{}}}static async saveMapping(e){try{if(!e.user_id||!e.original_form||!e.mapped_category)return console.error("saveMapping: Campos obrigat\xf3rios n\xe3o fornecidos",{user_id:!!e.user_id,original_form:!!e.original_form,mapped_category:!!e.mapped_category}),!1;if(!e2||!e4)return console.error("saveMapping: Vari\xe1veis de ambiente do Supabase n\xe3o configuradas"),!1;let{error:s}=await e5.from("form_mappings").upsert({user_id:e.user_id,original_form:e.original_form,mapped_category:e.mapped_category,confidence_score:e.confidence_score||0,suggestion_reason:e.suggestion_reason,mapping_source:e.mapping_source||"manual"},{onConflict:"user_id,original_form"});if(s)return console.error("Erro ao salvar mapeamento:",{message:s.message,details:s.details,hint:s.hint,code:s.code,mapping:{user_id:e.user_id,original_form:e.original_form,mapped_category:e.mapped_category}}),!1;return console.log(`saveMapping: Mapeamento salvo com sucesso para usu\xe1rio ${e.user_id}`),!0}catch(e){return console.error("Erro inesperado ao salvar mapeamento:",e),!1}}static async saveMappings(e){try{let{error:s}=await e5.from("form_mappings").upsert(e.map(e=>({user_id:e.user_id,original_form:e.original_form,mapped_category:e.mapped_category,confidence_score:e.confidence_score||0,suggestion_reason:e.suggestion_reason,mapping_source:e.mapping_source||"manual"})),{onConflict:"user_id,original_form"});if(s)return console.error("Erro ao salvar mapeamentos em lote:",s),!1;return!0}catch(e){return console.error("Erro ao salvar mapeamentos em lote:",e),!1}}static async removeMapping(e,s){try{let{error:a}=await e5.from("form_mappings").delete().eq("user_id",e).eq("original_form",s);if(a)return console.error("Erro ao remover mapeamento:",a),!1;return!0}catch(e){return console.error("Erro ao remover mapeamento:",e),!1}}static async getMappingStats(e){try{let{data:s,error:a}=await e5.from("form_mappings").select("mapped_category, mapping_source, confidence_score").eq("user_id",e);if(a)return console.error("Erro ao buscar estat\xedsticas:",a),null;let t={total:s.length,byCategory:{},bySource:{},avgConfidence:0},r=0;return s.forEach(e=>{t.byCategory[e.mapped_category]=(t.byCategory[e.mapped_category]||0)+1,t.bySource[e.mapping_source]=(t.bySource[e.mapping_source]||0)+1,r+=e.confidence_score||0}),t.avgConfidence=s.length>0?r/s.length:0,t}catch(e){return console.error("Erro ao calcular estat\xedsticas:",e),null}}static async getRecentMappings(e,s=10){try{let{data:a,error:t}=await e5.from("form_mappings").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(s);if(t)return console.error("Erro ao buscar mapeamentos recentes:",t),[];return a}catch(e){return console.error("Erro ao buscar mapeamentos recentes:",e),[]}}static async exportUserMappings(e){try{let{data:s,error:a}=await e5.from("form_mappings").select("*").eq("user_id",e).order("original_form");if(a)return console.error("Erro ao exportar mapeamentos:",a),[];return s}catch(e){return console.error("Erro ao exportar mapeamentos:",e),[]}}}let e6=[{value:"CAPSULAS PRONTAS",label:"C\xe1psulas Prontas",group:"S\xd3LIDOS"},{value:"CAPSULAS",label:"C\xe1psulas",group:"S\xd3LIDOS"},{value:"CAPSULAS GASTRO",label:"C\xe1psulas Gastro",group:"S\xd3LIDOS"},{value:"SACHES",label:"Sach\xeas",group:"S\xd3LIDOS"},{value:"MATERIA PRIMA",label:"Mat\xe9ria Prima",group:"S\xd3LIDOS"},{value:"GEL TRANSDERMICO, GEL VAGINAL",label:"Gel Transd\xe9rmico/Vaginal",group:"DERMATO A"},{value:"CREME, HYDRA FRESH, SECOND SKIN, CREME CRODA, CREME N\xc3O IONICO, CREME OIL FREE, CREME AREA DOS OLHOS, CREME CELULITE, LO\xc7\xc3O, LO\xc7\xc3O CREMOSA, LO\xc7\xc3O CRODA, LO\xc7\xc3O N\xc3O IONICA, LO\xc7\xc3O OIL FREE, POMADA",label:"Cremes e Lo\xe7\xf5es",group:"DERMATO A"},{value:"BASE SERUM",label:"Base Serum",group:"DERMATO A"},{value:"SHOT",label:"Shot",group:"DERMATO A"},{value:"SOLU\xc7\xc3O, XAROPE, ESMALTE",label:"Solu\xe7\xe3o/Xarope/Esmalte",group:"DERMATO A"},{value:"SHAMPOO, SABONETE, SABONETE CREMOSO, CONDICIONADOR",label:"Produtos Capilares",group:"DERMATO A"},{value:"LO\xc7\xc3O CAPILAR, LO\xc7\xc3O CAPILAR \xd1 ALCOOLICA",label:"Lo\xe7\xe3o Capilar",group:"DERMATO A"},{value:"GEL , GEL ACQUAGEL, GEL ALCOOLICO, GEL CREME, GEL DE AMIGEL, GEL FLUIDO, GEL NATROSOL, GEL SEPIGEL",label:"G\xe9is Diversos",group:"DERMATO A"},{value:"GEL COMESTIVEL",label:"Gel Comest\xedvel",group:"DERMATO A"},{value:"LIQUID CAPS",label:"Liquid Caps",group:"DERMATO C"},{value:"CAPSULAS VAGINAIS",label:"C\xe1psulas Vaginais",group:"DERMATO C"},{value:"GOMAS",label:"Gomas",group:"DERMATO C"},{value:"PASTILHAS",label:"Pastilhas",group:"DERMATO C"},{value:"BOMBOM",label:"Bombom",group:"DERMATO C"},{value:"FILMES",label:"Filmes",group:"DERMATO C"},{value:"OVULOS",label:"\xd3vulos",group:"DERMATO C"},{value:"FILME VAGINAL",label:"Filme Vaginal",group:"DERMATO C"},{value:"HOMEOPATIA, FLORAL E VEICULO",label:"Homeopatia/Floral/Ve\xedculo",group:"DERMATO C"}];function e8({isOpen:e,unmappedItems:s,onContinue:a,onCancel:l,userId:i}){let[n,o]=(0,r.useState)({}),[x,m]=(0,r.useState)({}),[h,u]=(0,r.useState)(!1),[p,j]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let a=async()=>{let e={},a={},t={};if(i)try{t=await e3.getUserMappings(i)}catch(e){console.error("Erro ao carregar mapeamentos do usu\xe1rio:",e)}s.forEach(s=>{if(t[s.forma])a[s.forma]=t[s.forma],e[s.forma]=[{category:t[s.forma],confidence:1,reason:"Mapeamento anterior salvo"}];else{let t=function(e){let s=[],a=eY(e);for(let[e,t]of Object.entries(eK))a.includes(e)&&s.push({category:t.category,confidence:t.confidence,reason:`Cont\xe9m palavra-chave: "${e}"`});for(let a of eJ){let t=e0(e,a.label);t>.6&&s.push({category:a.value,confidence:.8*t,reason:`Similar a "${a.label}" (${Math.round(100*t)}%)`})}for(let a of eJ)for(let t of a.value.split(", ")){let r=e0(e,t);r>.7&&s.push({category:a.value,confidence:.9*r,reason:`Corresponde a subcategoria: "${t}"`})}return s.reduce((e,s)=>{let a=e.find(e=>e.category===s.category);return!a||a.confidence<s.confidence?e.filter(e=>e.category!==s.category).concat(s):e},[]).sort((e,s)=>s.confidence-e.confidence).slice(0,3)}(s.forma);e[s.forma]=t,t.length>0&&t[0].confidence>=.8&&(a[s.forma]=t[0].category)}}),m(e),Object.keys(a).length>0&&!h&&(o(a),u(!0))};e&&s.length>0&&a()},[s,h,e,i]);let N=(e,s)=>{o(a=>({...a,[e]:s}))},v=s.filter(e=>e.forma.toLowerCase().includes(p.toLowerCase()));(0,r.useEffect)(()=>{f(v.every(e=>n[e.forma])&&v.length>0)},[n,v]);let b=()=>Object.keys(n).length,y=b()===s.length;return(0,t.jsx)(er,{open:e,onOpenChange:()=>{},children:(0,t.jsxs)(en,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(eo,{children:[(0,t.jsxs)(ex,{className:"flex items-center gap-2",children:[(0,t.jsx)(eH.A,{className:"h-5 w-5 text-orange-500"}),"Processamento Pausado - Itens N\xe3o Mapeados"]}),(0,t.jsxs)(em,{children:["Encontramos ",s.length," item(s) que n\xe3o possuem mapeamento. Por favor, escolha a categoria adequada para cada um antes de continuar o processamento."]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-orange-800",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"A\xe7\xe3o Requerida"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{if(g)o({}),f(!1);else{let e={};v.forEach(s=>{let a=x[s.forma]||[];a.length>0&&(e[s.forma]=a[0].category)}),o(s=>({...s,...e})),f(!0)}},className:"gap-2 text-purple-700 border-purple-300 hover:bg-purple-50",children:[g?(0,t.jsx)(V.A,{className:"h-3 w-3"}):(0,t.jsx)(eL.A,{className:"h-3 w-3"}),g?"Limpar Tudo":"Mapear Tudo"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{let e={};Object.entries(x).forEach(([s,a])=>{a.length>0&&a[0].confidence>=.7&&(e[s]=a[0].category)}),o(s=>({...s,...e}))},className:"gap-2 text-blue-700 border-blue-300 hover:bg-blue-50",children:[(0,t.jsx)(eq.A,{className:"h-3 w-3"}),"Sugest\xf5es Autom\xe1ticas"]})]})]}),(0,t.jsx)("p",{className:"text-sm text-orange-700 mt-1",children:"O processamento foi pausado porque encontramos formas farmac\xeauticas n\xe3o mapeadas. Selecione uma categoria para cada item ou use as sugest\xf5es autom\xe1ticas."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(eQ.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(ea.p,{placeholder:"Buscar forma farmac\xeautica...",value:p,onChange:e=>j(e.target.value),className:"pl-10"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:(0,t.jsxs)("span",{children:["Mostrando ",v.length," de ",s.length," itens"]})})]}),(0,t.jsx)("div",{className:"rounded-lg border overflow-hidden",children:(0,t.jsxs)(q,{children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(J,{className:"bg-gray-50",children:[(0,t.jsx)(K,{className:"font-semibold",children:"Forma Farmac\xeautica"}),(0,t.jsx)(K,{className:"font-semibold text-center",children:"Ocorr\xeancias"}),(0,t.jsx)(K,{className:"font-semibold",children:"Sugest\xf5es"}),(0,t.jsx)(K,{className:"font-semibold",children:"Categoria Destino *"})]})}),(0,t.jsx)(X,{children:v.map((e,s)=>{let a=x[e.forma]||[],r=a[0];return(0,t.jsxs)(J,{className:"hover:bg-gray-50",children:[(0,t.jsx)(Y,{className:"font-medium",children:e.forma}),(0,t.jsx)(Y,{className:"text-center",children:(0,t.jsx)(d.E,{variant:"secondary",children:e.ocorrencias})}),(0,t.jsx)(Y,{className:"max-w-xs",children:a.length>0?(0,t.jsx)("div",{className:"space-y-1",children:a.slice(0,2).map((s,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"ghost",size:"sm",className:`text-xs h-6 px-2 gap-1 ${s.confidence>=.8?"bg-green-100 text-green-800 hover:bg-green-200":s.confidence>=.6?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>{N(e.forma,s.category)},children:[(0,t.jsx)(eX.A,{className:"h-3 w-3"}),Math.round(100*s.confidence),"%"]}),(0,t.jsx)("span",{className:"text-xs text-gray-600 truncate flex-1",children:s.reason})]},a))}):(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Nenhuma sugest\xe3o"})}),(0,t.jsx)(Y,{children:(0,t.jsxs)(eD,{value:n[e.forma]||"",onValueChange:s=>N(e.forma,s),children:[(0,t.jsx)(eT,{className:`w-full ${!n[e.forma]?"border-orange-300 bg-orange-50":n[e.forma]===r?.category?"border-green-300 bg-green-50":"border-blue-300 bg-blue-50"}`,children:(0,t.jsx)(eM,{placeholder:"-- Selecione uma categoria --"})}),(0,t.jsxs)(ek,{children:[a.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 bg-gray-50",children:"\uD83D\uDCA1 Sugest\xf5es Autom\xe1ticas"}),a.map((e,s)=>{let a=e6.find(s=>s.value===e.category);return a?(0,t.jsx)(eF,{value:a.value,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:a.label}),(0,t.jsxs)(d.E,{variant:"outline",className:"text-xs",children:[Math.round(100*e.confidence),"%"]})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[a.group," • ",e.reason]})]})},`suggestion-${s}`):null}),(0,t.jsx)("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 bg-gray-50",children:"\uD83D\uDCCB Todas as Categorias"})]}),e6.map(e=>(0,t.jsx)(eF,{value:e.value,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.group})]})},e.value))]})]})})]},s)})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Progresso"})]}),(0,t.jsxs)("p",{className:"text-lg font-bold text-blue-900 mt-1",children:[b(),"/",s.length]}),(0,t.jsxs)("p",{className:"text-xs text-blue-600",children:[Math.round(b()/s.length*100),"% completo"]})]}),(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eq.A,{className:"w-4 h-4 text-green-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Sugest\xf5es"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-green-900 mt-1",children:Object.values(x).filter(e=>e.length>0&&e[0].confidence>=.7).length}),(0,t.jsx)("p",{className:"text-xs text-green-600",children:"com alta confian\xe7a"})]}),(0,t.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"w-4 h-4 text-orange-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Pendentes"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-orange-900 mt-1",children:s.length-b()}),(0,t.jsx)("p",{className:"text-xs text-orange-600",children:"requerem aten\xe7\xe3o"})]})]}),y&&(0,t.jsxs)("div",{className:"bg-green-100 border border-green-300 rounded-md p-3 flex items-center gap-2",children:[(0,t.jsx)(eL.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{className:"text-green-800 font-medium",children:"✅ Todos os itens foram mapeados com sucesso!"})]})]}),(0,t.jsxs)(ed,{children:[(0,t.jsx)(c.$,{variant:"outline",onClick:l,children:"Cancelar Processamento"}),(0,t.jsxs)(c.$,{onClick:()=>{a(n)},disabled:!y,className:"gap-2",children:[(0,t.jsx)(Z.A,{className:"h-4 w-4"}),"Continuar Processamento"]})]})]})})}function e7({data:e,onViewHistory:s}){var a;if(!e)return null;let r=e=>e&&!isNaN(e)?e:0;return(0,t.jsx)(E.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:(0,t.jsx)(l.Zp,{className:"border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,t.jsxs)(l.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"\xdaltimo Relat\xf3rio"}),(0,t.jsx)("p",{className:"text-lg font-bold text-blue-600",children:e.reportDate||"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Processado em"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800",children:(e=>{if(!e)return"Data n\xe3o dispon\xedvel";let s=new Date(e);return isNaN(s.getTime())?"Data inv\xe1lida":s.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(e.processedAt)})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(z.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[r(e.totalQuantity).toLocaleString()," itens"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)($.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:!(a=e.totalValue)||isNaN(a)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsxs)(d.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:[r(e.solidCount)," s\xf3lidos"]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.topSeller||"N/A"})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:s&&(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:s,className:"flex items-center space-x-1",children:[(0,t.jsx)(T.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Ver Hist\xf3rico"})]})})]}),(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[(0,t.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Di\xe1rio:"}),(0,t.jsx)("span",{children:e.diarioFileName||"N/A"})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Controle:"}),(0,t.jsx)("span",{children:e.controleFileName||"N/A"})]})]})})]})})})}var e9=a(8519),se=a(6154),ss=a(877),sa=a(1607);function st({data:e,title:s,type:a,height:r=300}){return e&&0!==e.length?(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center justify-between",children:[s,(0,t.jsxs)("div",{className:"text-sm font-normal text-gray-500",children:[e.length," ","category"===a?"categorias":"monthly"===a?"meses":"itens"]})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{style:{height:`${r}px`},children:(0,t.jsx)(ss.N1,{data:(()=>{if("category"===a){let s=e.slice(0,5),a=new Set;s.forEach(e=>{e.data?.forEach(e=>a.add(e.date))});let t=Array.from(a).sort(),r=["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)"];return{labels:t,datasets:s.map((e,s)=>{let a=t.map(s=>{let a=e.data?.find(e=>e.date===s);return a?a.value:0});return{label:e.category,data:a,borderColor:r[s],backgroundColor:r[s]+"20",tension:.4,fill:!1,pointRadius:4,pointHoverRadius:6}})}}return"monthly"===a?{labels:e.map(e=>{let[s,a]=e.month.split("-");return new Date(parseInt(s),parseInt(a)-1).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"})}),datasets:[{label:"Valor (R$)",data:e.map(e=>e.value),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0,yAxisID:"y"},{label:"Quantidade",data:e.map(e=>e.quantity),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!1,yAxisID:"y1"}]}:{labels:[],datasets:[]}})(),options:(()=>{let e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let s=e.dataset.label||"";return s&&(s+=": "),0===e.datasetIndex||"category"===a?s+="R$ "+(e.parsed.y||0).toLocaleString("pt-BR",{minimumFractionDigits:2}):s+=(e.parsed.y||0).toLocaleString()+" itens",s}}}},interaction:{mode:"nearest",axis:"x",intersect:!1},scales:{x:{display:!0,title:{display:!0,text:"monthly"===a?"Per\xedodo":"Data"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Valor (R$)"},ticks:{callback:function(e){return"R$ "+Number(e||0).toLocaleString("pt-BR",{minimumFractionDigits:0})}}}}};return"monthly"===a&&(e.scales.y1={type:"linear",display:!0,position:"right",title:{display:!0,text:"Quantidade"},grid:{drawOnChartArea:!1},ticks:{callback:function(e){return Number(e||0).toLocaleString()+" itens"}}}),e})()})}),"category"===a&&(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-600",children:"* Mostrando apenas as top 5 categorias por valor total"})]})]}):(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:s})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Dados insuficientes para exibir tend\xeancias"})})]})}sa.t1.register(sa.PP,sa.kc,sa.FN,sa.No,sa.hE,sa.m_,sa.s$);var sr=a(3884),sl=a(6613),si=a(3997);function sc({data:e,totalSellers:s}){if(!e||0===e.length)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-5 w-5"}),"Ranking de Vendedores"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Nenhum dados de vendedores dispon\xedvel"})})]});let a=e=>{switch(e){case 0:return(0,t.jsx)(sl.A,{className:"h-5 w-5 text-yellow-500"});case 1:return(0,t.jsx)(si.A,{className:"h-5 w-5 text-gray-400"});case 2:return(0,t.jsx)(W.A,{className:"h-5 w-5 text-orange-500"});default:return(0,t.jsxs)("span",{className:"text-lg font-bold text-slate-300",children:["#",e+1]})}},r=Math.max(...e.map(e=>e.totalValue)),i={labels:e.slice(0,6).map(e=>e.name.split(" ")[0]),datasets:[{label:"Valor Total (R$)",data:e.slice(0,6).map(e=>e.totalValue),backgroundColor:["rgba(245, 158, 11, 0.8)","rgba(156, 163, 175, 0.8)","rgba(251, 146, 60, 0.8)","rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgba(245, 158, 11, 1)","rgba(156, 163, 175, 1)","rgba(251, 146, 60, 1)","rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(139, 92, 246, 1)"],borderWidth:2,borderRadius:4}]};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2 text-white",children:[(0,t.jsx)(T.A,{className:"h-6 w-6 text-blue-400"}),"Ranking de Vendedores"]}),(0,t.jsxs)("p",{className:"text-slate-300",children:[s," vendedores ativos • Ordenado por valor total"]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Top 10 Vendedores"})}),(0,t.jsx)(l.Wu,{className:"space-y-4",children:e.slice(0,10).map((e,s)=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors border ${s<3?"bg-gradient-to-r from-slate-800/50 to-slate-700/50 border-slate-600":"hover:bg-slate-800/30 border-slate-700"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-10 h-10",children:a(s)}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(sr.eu,{children:(0,t.jsx)(sr.q5,{className:"bg-blue-500 text-white",children:e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium text-slate-100",children:e.name}),(e=>{switch(e){case 0:return(0,t.jsx)(d.E,{className:"bg-yellow-500",children:"\uD83E\uDD47 1\xba Lugar"});case 1:return(0,t.jsx)(d.E,{className:"bg-slate-500",children:"\uD83E\uDD48 2\xba Lugar"});case 2:return(0,t.jsx)(d.E,{className:"bg-orange-500",children:"\uD83E\uDD49 3\xba Lugar"});default:return(0,t.jsxs)(d.E,{variant:"outline",children:["#",e+1]})}})(s)]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-300",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)($.A,{className:"h-3 w-3"}),e.totalQuantity," itens"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(ey.A,{className:"h-3 w-3"}),e.uniqueDays," dias"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(es.A,{className:"h-3 w-3"}),"R$ ",e.avgTicket.toFixed(2)]})]})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-green-300",children:["R$ ",(e.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsx)("div",{className:"w-32 mt-1",children:(0,t.jsx)(eE,{value:e.totalValue/r*100,className:"h-1.5"})}),(0,t.jsxs)("p",{className:"text-xs text-slate-300 mt-1",children:["R$ ",e.avgValuePerDay.toFixed(2),"/dia"]})]})]},e.name))})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Top 6 - Comparativo Visual"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{style:{height:"400px"},children:(0,t.jsx)(ss.yP,{data:i,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return`R$ ${(e.parsed.y||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"R$ "+Number(e||0).toLocaleString("pt-BR",{minimumFractionDigits:0})}}}}}})})})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.slice(0,3).map((e,s)=>(0,t.jsxs)(l.Zp,{className:`border-l-4 ${0===s?"border-l-yellow-500":1===s?"border-l-gray-500":"border-l-orange-500"}`,children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)(l.ZB,{className:"text-base flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),a(s)]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400",children:"Valor Total"}),(0,t.jsxs)("p",{className:"font-semibold text-slate-100",children:["R$ ",(e.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400",children:"Ticket M\xe9dio"}),(0,t.jsxs)("p",{className:"font-semibold text-slate-100",children:["R$ ",e.avgTicket.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400",children:"Itens"}),(0,t.jsx)("p",{className:"font-semibold text-slate-100",children:e.totalQuantity})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400",children:"Dias Ativos"}),(0,t.jsx)("p",{className:"font-semibold text-slate-100",children:e.uniqueDays})]})]}),e.categories&&e.categories.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Categoria Principal"}),(0,t.jsxs)(d.E,{variant:"outline",className:"text-xs",children:[e.categories[0].category," (",e.categories[0].count,")"]})]})]})})]},e.name))})]})}function sn({data:e,title:s,height:a=300}){if(!e||0===e.length)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:s})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Dados insuficientes para heat map"})})]});e.map(e=>e.value).filter(e=>e>0);let r=e.reduce((e,s)=>e+s.value,0),i=r/e.length,c=e.filter(e=>e.value>0).sort((e,s)=>s.value-e.value).slice(0,3);return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5"}),s]}),(0,t.jsxs)(d.E,{variant:"outline",children:[e.filter(e=>e.value>0).length,"/",e.length," per\xedodos ativos"]})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 mb-6",children:e.map(e=>{var s,a;return(0,t.jsxs)("div",{className:`
                p-3 rounded-lg border-2 text-center transition-all duration-200 hover:scale-105 cursor-pointer
                ${(s=e.intensity,0===e.value?"bg-slate-800 border-slate-700 text-slate-400":s>=.8?"bg-red-500 border-red-600 text-white":s>=.6?"bg-red-400 border-red-500 text-white":s>=.4?"bg-orange-400 border-orange-500 text-white":s>=.2?"bg-yellow-400 border-yellow-500 text-gray-900":"bg-green-200 border-green-300 text-gray-900")}
              `,title:`${e.bucket}: R$ ${(e.value||0).toLocaleString("pt-BR",{minimumFractionDigits:2})} (${(a=e.intensity)>=.8?"Muito Alto":a>=.6?"Alto":a>=.4?"M\xe9dio":a>=.2?"Baixo":"Muito Baixo"})`,children:[(0,t.jsx)("div",{className:"text-xs font-medium mb-1",children:e.bucket}),(0,t.jsxs)("div",{className:"text-sm font-bold",children:["R$ ",e.value.toFixed(0)]}),(0,t.jsx)("div",{className:"text-xs opacity-75 mt-1",children:e.value>0?`${(e.value/r*100).toFixed(1)}%`:"0%"})]},e.bucket)})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-200 border border-green-300 rounded"}),(0,t.jsx)("span",{children:"Baixo"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-400 border border-yellow-500 rounded"}),(0,t.jsx)("span",{children:"M\xe9dio-Baixo"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-orange-400 border border-orange-500 rounded"}),(0,t.jsx)("span",{children:"M\xe9dio"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-400 border border-red-500 rounded"}),(0,t.jsx)("span",{children:"Alto"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-500 border border-red-600 rounded"}),(0,t.jsx)("span",{children:"Muito Alto"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-600 mb-1",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),"Hor\xe1rio de Pico"]}),(0,t.jsx)("div",{className:"font-bold text-lg text-green-600",children:c[0]?.bucket||"N/A"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["R$ ",(c[0]?.value||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-600 mb-1",children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),"Valor Total"]}),(0,t.jsxs)("div",{className:"font-bold text-lg text-blue-600",children:["R$ ",(r||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["M\xe9dia: R$ ",i.toFixed(2),"/per\xedodo"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-600 mb-1",children:[(0,t.jsx)(ey.A,{className:"h-4 w-4"}),"Per\xedodos Ativos"]}),(0,t.jsx)("div",{className:"font-bold text-lg text-purple-600",children:e.filter(e=>e.value>0).length}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["de ",e.length," per\xedodos"]})]})]}),c.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"Top 3 Hor\xe1rios"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:c.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(d.E,{variant:0===s?"default":"outline",className:"text-xs",children:["#",s+1]}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-200",children:e.bucket})]}),(0,t.jsxs)("div",{className:"text-sm font-bold text-green-300",children:["R$ ",(e.value||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e.bucket))})]})]})]})}function so({data:e,title:s}){let[a,i]=(0,r.useState)("ALL"),[n,o]=(0,r.useState)("table");if(!e||0===e.length)return(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:s})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Dados insuficientes para an\xe1lise ABC"})})]});let x={A:e.filter(e=>"A"===e.classification),B:e.filter(e=>"B"===e.classification),C:e.filter(e=>"C"===e.classification)},m={A:{count:x.A.length,totalValue:x.A.reduce((e,s)=>e+s.totalValue,0),valuePercent:x.A.reduce((e,s)=>e+s.valuePercent,0)},B:{count:x.B.length,totalValue:x.B.reduce((e,s)=>e+s.totalValue,0),valuePercent:x.B.reduce((e,s)=>e+s.valuePercent,0)},C:{count:x.C.length,totalValue:x.C.reduce((e,s)=>e+s.totalValue,0),valuePercent:x.C.reduce((e,s)=>e+s.valuePercent,0)}},h="ALL"===a?e:e.filter(e=>e.classification===a),u={labels:["Classe A (80%)","Classe B (15%)","Classe C (5%)"],datasets:[{data:[m.A.valuePercent,m.B.valuePercent,m.C.valuePercent],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)"],borderWidth:2}]},p={labels:h.slice(0,10).map(e=>e.product.length>15?e.product.slice(0,15)+"...":e.product),datasets:[{label:"Valor (R$)",data:h.slice(0,10).map(e=>e.totalValue),backgroundColor:h.slice(0,10).map(e=>"A"===e.classification?"rgba(34, 197, 94, 0.8)":"B"===e.classification?"rgba(245, 158, 11, 0.8)":"rgba(239, 68, 68, 0.8)"),borderColor:h.slice(0,10).map(e=>"A"===e.classification?"rgba(34, 197, 94, 1)":"B"===e.classification?"rgba(245, 158, 11, 1)":"rgba(239, 68, 68, 1)"),borderWidth:2,borderRadius:4}]};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-6 w-6 text-blue-500"}),s]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[e.length," produtos • Baseado no valor de vendas"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.$,{variant:"table"===n?"default":"outline",size:"sm",onClick:()=>o("table"),children:"Tabela"}),(0,t.jsx)(c.$,{variant:"chart"===n?"default":"outline",size:"sm",onClick:()=>o("chart"),children:"Gr\xe1fico"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(l.Zp,{className:"border-l-4 border-l-green-500",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Classe A"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:m.A.count}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[m.A.valuePercent.toFixed(1),"% do valor"]})]}),(0,t.jsx)(d.E,{className:"bg-green-500",children:"A"})]})})}),(0,t.jsx)(l.Zp,{className:"border-l-4 border-l-yellow-500",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Classe B"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:m.B.count}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[m.B.valuePercent.toFixed(1),"% do valor"]})]}),(0,t.jsx)(d.E,{className:"bg-yellow-500",children:"B"})]})})}),(0,t.jsx)(l.Zp,{className:"border-l-4 border-l-red-500",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Classe C"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:m.C.count}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[m.C.valuePercent.toFixed(1),"% do valor"]})]}),(0,t.jsx)(d.E,{className:"bg-red-500",children:"C"})]})})}),(0,t.jsx)(l.Zp,{className:"border-l-4 border-l-blue-500",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"produtos"})]}),(0,t.jsx)(z.A,{className:"h-8 w-8 text-blue-500"})]})})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eV.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Filtrar por classifica\xe7\xe3o:"}),(0,t.jsx)("div",{className:"flex gap-1",children:["ALL","A","B","C"].map(e=>(0,t.jsx)(c.$,{variant:a===e?"default":"outline",size:"sm",onClick:()=>i(e),children:"ALL"===e?"Todos":`Classe ${e}`},e))})]}),"table"===n?(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg",children:["Lista de Produtos - ","ALL"===a?"Todos":`Classe ${a}`]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"space-y-3",children:h.slice(0,20).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center w-8 h-8 bg-white rounded-full text-sm font-medium",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.product}),(0,t.jsx)(d.E,{className:(e=>{switch(e){case"A":return"bg-green-500 text-white";case"B":return"bg-yellow-500 text-white";case"C":return"bg-red-500 text-white"}})(e.classification),children:e.classification})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.category}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{switch(e){case"A":return"Alto valor - Controle rigoroso";case"B":return"Valor m\xe9dio - Controle moderado";case"C":return"Baixo valor - Controle simples"}})(e.classification)})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-green-600",children:["R$ ",(e.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[e.totalQuantity," unidades"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.valuePercent.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-24 mt-1",children:(0,t.jsx)(eE,{value:e.cumulativePercent,className:"h-1"})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Acumulado: ",e.cumulativePercent.toFixed(1),"%"]})]})]},e.product))}),h.length>20&&(0,t.jsxs)("div",{className:"text-center mt-4 text-sm text-gray-500",children:["Mostrando 20 de ",h.length," produtos"]})]})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Distribui\xe7\xe3o ABC"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{style:{height:"300px"},children:(0,t.jsx)(ss.nu,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg",children:["Top 10 - ","ALL"===a?"Geral":`Classe ${a}`]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{style:{height:"300px"},children:(0,t.jsx)(ss.yP,{data:p,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return`R$ ${(e.parsed.y||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"R$ "+Number(e||0).toLocaleString("pt-BR",{minimumFractionDigits:0})}}}}}})})})]})]})]})}sa.t1.register(sa.PP,sa.kc,sa.E8,sa.hE,sa.m_,sa.s$),sa.t1.register(sa.PP,sa.kc,sa.E8,sa.Bs,sa.hE,sa.m_,sa.s$);var sd=a(6921),sx=a(8874),sm=a(3327),sh=a(6132);function su({insights:e,comparisons:s}){let a=e=>{switch(e){case"positive":return(0,t.jsx)($.A,{className:"h-4 w-4 text-green-500"});case"negative":return(0,t.jsx)(sd.A,{className:"h-4 w-4 text-red-500"});default:return null}},r=e=>(e||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}),i=e=>{let s=e||0,a=s>=0?"+":"";return`${a}${s.toFixed(1)}%`};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(se.A,{className:"h-6 w-6 text-purple-500"}),"Insights e Alertas Inteligentes"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[e.summary.totalInsights," insights • ",e.summary.totalAlerts," alertas • ",e.summary.totalRecommendations," recomenda\xe7\xf5es"]})]}),s.available&&(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsxs)(l.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-5 w-5"}),"Compara\xe7\xe3o com Per\xedodo Anterior"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Crescimento em Valor"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a(s.valueGrowth>=0?"positive":"negative"),(0,t.jsx)("span",{className:`font-bold ${s.valueGrowth>=0?"text-green-600":"text-red-600"}`,children:i(s.valueGrowth)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Atual: ",r(s.current.value)]}),(0,t.jsxs)("span",{className:"text-gray-500",children:["Anterior: ",r(s.previous.value)]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Crescimento em Quantidade"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a(s.quantityGrowth>=0?"positive":"negative"),(0,t.jsx)("span",{className:`font-bold ${s.quantityGrowth>=0?"text-green-600":"text-red-600"}`,children:i(s.quantityGrowth)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Atual: ",s.current.quantity.toLocaleString()]}),(0,t.jsxs)("span",{className:"text-gray-500",children:["Anterior: ",s.previous.quantity.toLocaleString()]})]})]})]})})]})}),!s.available&&s.message&&(0,t.jsxs)(x.Fc,{children:[(0,t.jsx)(sm.A,{className:"h-4 w-4"}),(0,t.jsx)(x.TN,{children:s.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(E.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(eX.A,{className:"h-5 w-5 text-yellow-500"}),"Insights (",e.insights.length,")"]})}),(0,t.jsx)(l.Wu,{children:e.insights.length>0?(0,t.jsx)("div",{className:"space-y-4",children:e.insights.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(e=>{switch(e){case"performance":return(0,t.jsx)($.A,{className:"h-5 w-5 text-blue-500"});case"growth":return(0,t.jsx)($.A,{className:"h-5 w-5 text-green-500"});case"decline":return(0,t.jsx)(sd.A,{className:"h-5 w-5 text-red-500"});default:return(0,t.jsx)(eX.A,{className:"h-5 w-5 text-yellow-500"})}})(e.type),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),a(e.trend)]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.value&&(0,t.jsx)("p",{className:"text-lg font-bold text-blue-600 mt-2",children:r(e.value)})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(eX.A,{className:"mx-auto h-12 w-12 mb-2 opacity-20"}),(0,t.jsx)("p",{children:"Nenhum insight dispon\xedvel"}),(0,t.jsx)("p",{className:"text-sm",children:"Processe mais relat\xf3rios para gerar insights"})]})})]})}),(0,t.jsx)(E.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(sh.A,{className:"h-5 w-5 text-orange-500"}),"Alertas (",e.alerts.length,")"]})}),(0,t.jsx)(l.Wu,{children:e.alerts.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.alerts.map((e,s)=>(0,t.jsxs)(x.Fc,{variant:"error"===e.severity?"destructive":"default",children:[(e=>{switch(e){case"success":return(0,t.jsx)(R.A,{className:"h-4 w-4 text-green-500"});case"warning":return(0,t.jsx)(S.A,{className:"h-4 w-4 text-yellow-500"});case"error":return(0,t.jsx)(sx.A,{className:"h-4 w-4 text-red-500"});default:return(0,t.jsx)(sm.A,{className:"h-4 w-4 text-blue-500"})}})(e.severity),(0,t.jsx)(x.TN,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm mt-1",children:e.description})]})})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(R.A,{className:"mx-auto h-12 w-12 mb-2 text-green-200"}),(0,t.jsx)("p",{children:"Tudo funcionando bem!"}),(0,t.jsx)("p",{className:"text-sm",children:"Nenhum alerta no momento"})]})})]})})]}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 text-green-500"}),"Recomenda\xe7\xf5es (",e.recommendations.length,")"]})}),(0,t.jsx)(l.Wu,{children:e.recommendations.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.recommendations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:bg-slate-800/30 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full ${(e=>{switch(e){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-blue-500"}})(e.priority)}`}),(0,t.jsx)(es.A,{className:"h-4 w-4 text-gray-400"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsx)(d.E,{variant:"high"===e.priority?"destructive":"outline",className:"text-xs",children:"high"===e.priority?"Alta":"medium"===e.priority?"M\xe9dia":"Baixa"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,t.jsx)(d.E,{variant:"outline",className:"text-xs mt-2",children:e.type})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(es.A,{className:"mx-auto h-12 w-12 mb-2 opacity-20"}),(0,t.jsx)("p",{children:"Nenhuma recomenda\xe7\xe3o no momento"}),(0,t.jsx)("p",{className:"text-sm",children:"Continue processando dados para receber sugest\xf5es"})]})})]})}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(l.Zp,{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(se.A,{className:"h-5 w-5 text-purple-500"}),"Resumo de Performance"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-full mx-auto mb-2",children:(0,t.jsx)(eX.A,{className:"h-6 w-6 text-yellow-600"})}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:e.summary.totalInsights}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Insights Gerados"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full mx-auto mb-2",children:(0,t.jsx)(S.A,{className:"h-6 w-6 text-orange-600"})}),(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:e.summary.totalAlerts}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Alertas Ativos"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mx-auto mb-2",children:(0,t.jsx)(es.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.summary.totalRecommendations}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Recomenda\xe7\xf5es"})]})]})})]})})]})}function sp({data:e,comparisons:s}){let a=e=>(e||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}),r=e=>{let s=e||0,a=s>=0?"+":"";return`${a}${s.toFixed(1)}%`},i=e=>void 0===e?"text-gray-500":e>=0?"text-green-600":"text-red-600",c=e=>void 0===e?null:e>=0?(0,t.jsx)($.A,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(sd.A,{className:"h-4 w-4 text-red-500"}),n=[{title:"Valor Total",icon:(0,t.jsx)(U.A,{className:"h-5 w-5 text-green-500"}),current:a(e.current.totalValue),historical:a(e.historical.totalValue),growth:s.valueGrowth,description:"Receita gerada no per\xedodo",color:"green"},{title:"Quantidade Total",icon:(0,t.jsx)(z.A,{className:"h-5 w-5 text-blue-500"}),current:e.current.totalQuantity.toLocaleString(),historical:e.historical.totalQuantity.toLocaleString(),growth:s.quantityGrowth,description:"Itens processados",color:"blue"},{title:"Relat\xf3rios Processados",icon:(0,t.jsx)(M.A,{className:"h-5 w-5 text-purple-500"}),current:e.current.totalReports.toLocaleString(),historical:e.historical.totalReports.toLocaleString(),growth:e.historical.totalReports>0?(e.current.totalReports-e.historical.totalReports)/e.historical.totalReports*100:0,description:"Relat\xf3rios no sistema",color:"purple"},{title:"Valor M\xe9dio/Relat\xf3rio",icon:(0,t.jsx)(es.A,{className:"h-5 w-5 text-orange-500"}),current:a(e.current.avgReportValue),historical:a(e.historical.avgReportValue),growth:e.historical.avgReportValue>0?(e.current.avgReportValue-e.historical.avgReportValue)/e.historical.avgReportValue*100:0,description:"Ticket m\xe9dio por relat\xf3rio",color:"orange"}];return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map((a,n)=>{var o;return(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:(0,t.jsxs)(l.Zp,{className:`border-l-4 border-l-${a.color}-500`,children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)(l.ZB,{className:"text-sm font-medium flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a.icon,a.title]}),void 0===(o=a.growth)?null:(0,t.jsx)(d.E,{variant:o>=0?"default":"destructive",className:"text-xs",children:o>=0?"Crescimento":"Decl\xednio"})]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.current}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:a.description})]}),void 0!==a.growth&&s.available&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[c(a.growth),(0,t.jsx)("span",{className:`text-sm font-medium ${i(a.growth)}`,children:r(a.growth)})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"vs per\xedodo anterior"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"Per\xedodo"}),(0,t.jsx)("span",{children:"Hist\xf3rico"})]}),(0,t.jsx)(eE,{value:e.historical.totalValue>0?Math.min(e.current.totalValue/e.historical.totalValue*50,100):50,className:"h-2"})]})]})})]})},a.title)})}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,t.jsx)(l.Zp,{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full",children:(0,t.jsx)(P.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Contexto Hist\xf3rico"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.historical.totalReports," relat\xf3rios • ",a(e.historical.totalValue)," em vendas"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Dados hist\xf3ricos"})]}),s.available?(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Compara\xe7\xe3o com per\xedodo anterior dispon\xedvel"}):(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s.message})]})]})})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(E.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Efici\xeancia"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:e.current.totalReports>0?(e.current.totalQuantity/e.current.totalReports).toFixed(1):"0"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"itens/relat\xf3rio"})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)(M.A,{className:"h-8 w-8 text-blue-500"})})]})})})}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Ticket M\xe9dio"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:a(e.current.totalQuantity>0?e.current.totalValue/e.current.totalQuantity:0)}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"por item"})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)(es.A,{className:"h-8 w-8 text-green-500"})})]})})})}),(0,t.jsx)(E.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8},children:(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Crescimento"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(s.valueGrowth),(0,t.jsx)("p",{className:`text-lg font-bold ${i(s.valueGrowth)}`,children:void 0!==s.valueGrowth?r(s.valueGrowth):"N/A"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"em valor"})]})})})})})]})]})}var sj=a(9141);function sg(){let[e,s]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[n,o]=(0,r.useState)("all"),[x,p]=(0,r.useState)("");(0,r.useEffect)(()=>{j()},[n]);let j=async()=>{i(!0);try{let e=new URLSearchParams;"all"!==n&&e.append("status",n);let a=await fetch(`/api/defaulters?${e.toString()}`);if(a.ok){let e=await a.json();e.success&&s(e.data)}else eh.oR.error("Erro ao carregar dados de clientes")}catch(e){eh.oR.error("Erro ao carregar dados")}finally{i(!1)}},g=e?.clients.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.phone.includes(x))||[];return a?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eu.A,{className:"h-6 w-6 animate-spin text-blue-500"}),(0,t.jsx)("span",{children:"Processando dados de clientes..."})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(T.A,{className:"h-8 w-8 text-blue-500"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Clientes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e?.stats.total||0})]})]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(U.A,{className:"h-8 w-8 text-green-500"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",(e?.stats.totalAmount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(R.A,{className:"h-8 w-8 text-green-500"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Recebidos"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e?.stats.received||0})]})]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(S.A,{className:"h-8 w-8 text-red-500"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"N\xe3o Recebidos"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e?.stats.pending||0})]})]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 text-purple-500"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Pedidos"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:e?.stats.totalOrders||0})]})]})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(e9.A,{className:"h-5 w-5"}),"Controle de Pagamentos de Clientes"]}),(0,t.jsx)(l.BT,{children:"Dados extra\xeddos automaticamente do hist\xf3rico de relat\xf3rios importados"})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(eQ.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(ea.p,{placeholder:"Buscar por nome ou telefone...",value:x,onChange:e=>p(e.target.value),className:"pl-10"})]})}),(0,t.jsx)("div",{className:"w-48",children:(0,t.jsxs)(eD,{value:n,onValueChange:o,children:[(0,t.jsxs)(eT,{children:[(0,t.jsx)(eV.A,{className:"h-4 w-4 mr-2"}),(0,t.jsx)(eM,{})]}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(eF,{value:"all",children:"Todos os Status"}),(0,t.jsx)(eF,{value:"received",children:"Recebidos (S)"}),(0,t.jsx)(eF,{value:"pending",children:"N\xe3o Recebidos (N)"})]})]})}),(0,t.jsx)(c.$,{onClick:j,variant:"outline",size:"sm",children:(0,t.jsx)(eu.A,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(q,{children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(J,{children:[(0,t.jsx)(K,{children:"Cliente"}),(0,t.jsx)(K,{children:"Telefone"}),(0,t.jsx)(K,{children:"Data do Pedido"}),(0,t.jsx)(K,{className:"text-right",children:"Valor Total"}),(0,t.jsx)(K,{className:"text-center",children:"Pedidos"}),(0,t.jsx)(K,{children:"Recebido"})]})}),(0,t.jsx)(X,{children:0===g.length?(0,t.jsx)(J,{children:(0,t.jsx)(Y,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Nenhum cliente encontrado"})}):g.map((e,s)=>(0,t.jsxs)(J,{className:"N"===e.received?"bg-red-50":"",children:[(0,t.jsx)(Y,{className:"font-medium",children:(0,t.jsxs)("div",{children:[e.name,(0,t.jsx)("p",{className:"text-sm text-gray-500",children:1===e.pedidos?"1 pedido":`${e.pedidos} pedidos`})]})}),(0,t.jsx)(Y,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(sj.A,{className:"h-4 w-4 text-gray-400"}),(e=>{if(!e)return"";let s=e.replace(/\D/g,"");return 11===s.length?`(${s.slice(0,2)}) ${s.slice(2,7)}-${s.slice(7)}`:e})(e.phone)]})}),(0,t.jsx)(Y,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}),(0,m.GP)(new Date(e.date),"dd/MM/yyyy",{locale:h.F})]})}),(0,t.jsxs)(Y,{className:"text-right font-mono font-semibold",children:["R$ ",(e.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsx)(Y,{className:"text-center",children:(0,t.jsx)(d.E,{variant:"outline",children:e.pedidos})}),(0,t.jsx)(Y,{children:"S"===e.received?(0,t.jsxs)(d.E,{variant:"default",className:"gap-1 bg-green-500 hover:bg-green-600",children:[(0,t.jsx)(R.A,{className:"h-3 w-3"}),"Recebido"]}):(0,t.jsxs)(d.E,{variant:"destructive",className:"gap-1",children:[(0,t.jsx)(S.A,{className:"h-3 w-3"}),"N\xe3o Recebido"]})})]},`${e.name}-${e.phone}`))})]})})]})]})]})}function sf({className:e}){let[s,a]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)("30"),[h,p]=(0,r.useState)("overview");(0,r.useEffect)(()=>{j()},[x]);let j=async()=>{o(!0);try{let e=await fetch(`/api/analytics?period=${x}`);if(e.ok){let s=await e.json();s.success&&a(s.data)}}catch(e){console.error("Erro ao carregar analytics:",e)}finally{o(!1)}};return n?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eu.A,{className:"h-6 w-6 animate-spin text-blue-500"}),(0,t.jsx)("span",{children:"Carregando an\xe1lises..."})]})}):s?(0,t.jsxs)("div",{className:`space-y-6 ${e}`,children:[(0,t.jsxs)(E.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise de Dados"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Insights detalhados dos \xfaltimos ",x," dias • ",s.summary?.current?.totalReports||0," relat\xf3rios"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(eD,{value:x,onValueChange:m,children:[(0,t.jsx)(eT,{className:"w-40",children:(0,t.jsx)(eM,{placeholder:"Per\xedodo"})}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(eF,{value:"7",children:"\xdaltimos 7 dias"}),(0,t.jsx)(eF,{value:"14",children:"\xdaltimas 2 semanas"}),(0,t.jsx)(eF,{value:"30",children:"\xdaltimo m\xeas"}),(0,t.jsx)(eF,{value:"60",children:"\xdaltimos 2 meses"}),(0,t.jsx)(eF,{value:"90",children:"\xdaltimos 3 meses"})]})]}),(0,t.jsxs)(c.$,{onClick:j,size:"sm",variant:"outline",children:[(0,t.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]})]}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsx)(sp,{data:s.summary,comparisons:s.comparisons})}),(0,t.jsx)(E.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:(0,t.jsxs)(i.tU,{value:h,onValueChange:p,className:"space-y-6",children:[(0,t.jsxs)(i.j7,{className:"grid grid-cols-7 w-full",children:[(0,t.jsxs)(i.Xi,{value:"overview",className:"flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),"Vis\xe3o Geral"]}),(0,t.jsxs)(i.Xi,{value:"trends",className:"flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),"Tend\xeancias"]}),(0,t.jsxs)(i.Xi,{value:"sellers",className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4"}),"Vendedores"]}),(0,t.jsxs)(i.Xi,{value:"temporal",className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-4 w-4"}),"Hor\xe1rios"]}),(0,t.jsxs)(i.Xi,{value:"financial",className:"flex items-center gap-2",children:[(0,t.jsx)(U.A,{className:"h-4 w-4"}),"Financeiro"]}),(0,t.jsxs)(i.Xi,{value:"defaulters",className:"flex items-center gap-2",children:[(0,t.jsx)(e9.A,{className:"h-4 w-4"}),"Inadimplentes"]}),(0,t.jsxs)(i.Xi,{value:"insights",className:"flex items-center gap-2",children:[(0,t.jsx)(se.A,{className:"h-4 w-4"}),"Insights"]})]}),(0,t.jsxs)(i.av,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zp,{className:"border-l-4 border-l-green-500",children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)(l.ZB,{className:"flex items-center justify-between text-lg",children:["Performance Geral",(0,t.jsx)($.A,{className:"h-5 w-5 text-green-500"})]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Valor Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",(s.summary?.current?.totalValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Quantidade Total"}),(0,t.jsxs)("p",{className:"text-xl font-semibold",children:[(s.summary?.current?.totalQuantity||0).toLocaleString()," itens"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Valor M\xe9dio por Relat\xf3rio"}),(0,t.jsxs)("p",{className:"text-lg font-semibold",children:["R$ ",(s.summary?.current?.avgReportValue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})})]}),(0,t.jsxs)(l.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)(l.ZB,{className:"flex items-center justify-between text-lg",children:["Top Vendedor",(0,t.jsx)(W.A,{className:"h-5 w-5 text-blue-500"})]})}),(0,t.jsx)(l.Wu,{children:s.sellers?.topPerformer?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-bold text-blue-600",children:s.sellers.topPerformer.name}),(0,t.jsxs)(d.E,{variant:"secondary",children:["#",1]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Valor Total"}),(0,t.jsxs)("p",{className:"text-xl font-semibold",children:["R$ ",s.sellers.topPerformer.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Ticket M\xe9dio"}),(0,t.jsxs)("p",{className:"text-lg",children:["R$ ",s.sellers.topPerformer.avgTicket.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}):(0,t.jsx)("p",{className:"text-gray-500",children:"Dados insuficientes"})})]}),(0,t.jsxs)(l.Zp,{className:"border-l-4 border-l-orange-500",children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)(l.ZB,{className:"flex items-center justify-between text-lg",children:["Hor\xe1rio de Pico",(0,t.jsx)(ey.A,{className:"h-5 w-5 text-orange-500"})]})}),(0,t.jsx)(l.Wu,{children:s.temporal?.peakHours?.[0]?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-bold text-orange-600",children:s.temporal.peakHours[0][0]}),(0,t.jsx)(d.E,{variant:"outline",children:"Melhor hor\xe1rio"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Volume"}),(0,t.jsxs)("p",{className:"text-xl font-semibold",children:[s.temporal.peakHours[0][1]," vendas"]})]})]}):(0,t.jsx)("p",{className:"text-gray-500",children:"Dados insuficientes"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.trends?.categoryTrends&&(0,t.jsx)(st,{data:s.trends.categoryTrends.slice(0,5),title:"Top 5 Categorias - Tend\xeancia",type:"category"}),s.temporal?.heatmapData&&(0,t.jsx)(sn,{data:s.temporal.heatmapData,title:"Distribui\xe7\xe3o de Vendas por Hor\xe1rio"})]})]}),(0,t.jsxs)(i.av,{value:"trends",className:"space-y-6",children:[s.trends?.categoryTrends&&(0,t.jsx)(st,{data:s.trends.categoryTrends,title:"Tend\xeancias por Categoria",type:"category",height:400}),s.trends?.monthlyGrowth&&s.trends.monthlyGrowth.length>0&&(0,t.jsx)(st,{data:s.trends.monthlyGrowth,title:"Crescimento Mensal",type:"monthly",height:300})]}),(0,t.jsx)(i.av,{value:"sellers",className:"space-y-6",children:s.sellers?.ranking&&(0,t.jsx)(sc,{data:s.sellers.ranking,totalSellers:s.sellers.totalSellers})}),(0,t.jsx)(i.av,{value:"temporal",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.temporal?.heatmapData&&(0,t.jsx)(sn,{data:s.temporal.heatmapData,title:"Heat Map de Vendas por Hor\xe1rio",height:400}),s.temporal?.dailyDistribution&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Distribui\xe7\xe3o por Dia da Semana"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(s.temporal.dailyDistribution).sort(([,e],[,s])=>s-e).map(e=>{let a=e[0],r=e[1];return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:a}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${r/Math.max(...Object.values(s.temporal.dailyDistribution))*100}%`}})}),(0,t.jsx)("span",{className:"text-sm font-medium w-12 text-right",children:r})]})]},a)})})})]})]})}),(0,t.jsxs)(i.av,{value:"financial",className:"space-y-6",children:[s.financial?.abcAnalysis&&(0,t.jsx)(so,{data:s.financial.abcAnalysis,title:"An\xe1lise ABC dos Produtos"}),s.financial?.categoryRentability&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-5 w-5"}),"Rentabilidade por Categoria"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:s.financial.categoryRentability.slice(0,8).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(d.E,{variant:"outline",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-100",children:e.category}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:[e.totalQuantity," itens"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-green-300",children:["R$ ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:[e.valuePercent.toFixed(1),"% do total"]})]})]},e.category))})})]})]}),(0,t.jsx)(i.av,{value:"defaulters",children:(0,t.jsx)(sg,{})}),(0,t.jsx)(i.av,{value:"insights",children:(0,t.jsx)(su,{insights:s.insights,comparisons:s.comparisons})})]})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(M.A,{className:"mx-auto h-12 w-12 text-blue-500 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"An\xe1lises Dispon\xedveis"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Processe alguns relat\xf3rios para ver an\xe1lises detalhadas aqui."}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 Esta se\xe7\xe3o inclui: Tend\xeancias, Vendedores, Dados Financeiros, Controle de Pagamentos e muito mais!"})]})}var sN=a(859);function sv(){let[e,s]=(0,r.useState)(null),[a,i]=(0,r.useState)(!1),n=async()=>{i(!0);try{let e=await fetch("/api/verify-database"),a=await e.json();a.success?(s(a),eh.oR.success("Verifica\xe7\xe3o conclu\xedda")):eh.oR.error("Erro na verifica\xe7\xe3o: "+a.error)}catch(e){eh.oR.error("Erro ao executar verifica\xe7\xe3o"),console.error("Erro:",e)}finally{i(!1)}},o=e=>void 0===e?(0,t.jsx)(sm.A,{className:"h-4 w-4 text-blue-500"}):e?(0,t.jsx)(R.A,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(sx.A,{className:"h-4 w-4 text-red-500"}),m=(e,s="")=>void 0===e?(0,t.jsx)(d.E,{variant:"outline",children:"N/A"}):e?(0,t.jsx)(d.E,{className:"bg-green-500",children:s||"OK"}):(0,t.jsx)(d.E,{variant:"destructive",children:s||"Erro"});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-6 w-6"}),"Verifica\xe7\xe3o de Integridade do Banco de Dados"]}),(0,t.jsx)(l.BT,{children:"Diagn\xf3stico completo das tabelas, dados, relacionamentos e opera\xe7\xf5es CRUD"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)(c.$,{onClick:n,disabled:a,className:"gap-2",children:[a?(0,t.jsx)(eu.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(k.A,{className:"h-4 w-4"}),a?"Verificando...":"Executar Verifica\xe7\xe3o"]})})]}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Fc,{variant:e.verification.summary.allOk?"default":"destructive",children:[e.verification.summary.allOk?(0,t.jsx)(R.A,{className:"h-4 w-4"}):(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsxs)(x.TN,{children:[(0,t.jsx)("strong",{children:e.message}),(0,t.jsx)("br",{}),(0,t.jsxs)("small",{children:["Verifica\xe7\xe3o realizada em: ",new Date(e.verification.timestamp).toLocaleString("pt-BR")]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Tabelas"})]}),m(e.verification.summary.tablesOk)]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Dados Usu\xe1rio"})]}),m(e.verification.summary.userDataOk)]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(sN.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Relacionamentos"})]}),m(e.verification.summary.relationshipsOk)]})})}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ee.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Opera\xe7\xf5es CRUD"})]}),m(e.verification.summary.crudOk)]})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Estrutura das Tabelas"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(e.verification.tables).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(s.success),(0,t.jsx)("span",{className:"font-medium text-slate-100",children:e}),s.error&&(0,t.jsx)("small",{className:"text-red-400",children:s.error})]}),(0,t.jsxs)(d.E,{variant:"outline",className:"bg-slate-700 text-slate-200 border-slate-500",children:[s.count.toLocaleString()," registros"]})]},e))})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Dados do Usu\xe1rio Atual"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.verification.userData.currentUser?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"Usu\xe1rio"}),e.verification.userData.currentUser?.name&&(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:[e.verification.userData.currentUser.name,"(",e.verification.userData.currentUser.email,")"]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.verification.userData.reports?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"Relat\xf3rios"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.verification.userData.reports?.count||0," relat\xf3rios encontrados"]})]})]}),(0,t.jsx)(D.A,{className:"h-5 w-5 text-blue-500"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.verification.userData.settings?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"Configura\xe7\xf5es"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.verification.userData.settings?.count||0," configura\xe7\xf5es",e.verification.userData.settings?.keys?.length&&e.verification.userData.settings.keys.length>0&&(0,t.jsxs)("span",{children:[" (",e.verification.userData.settings.keys.join(", "),")"]})]})]})]}),(0,t.jsx)(ee.A,{className:"h-5 w-5 text-purple-500"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.verification.userData.lastProcessing?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"\xdaltimo Processamento"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.verification.userData.lastProcessing?.count||0," registros"]})]})]}),(0,t.jsx)(eu.A,{className:"h-5 w-5 text-green-500"})]})]})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Teste de Opera\xe7\xf5es CRUD"}),(0,t.jsx)(l.BT,{children:"Teste de INSERT, UPDATE e DELETE na tabela user_settings"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[o(e.verification.crudTest.insert?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"INSERT"}),e.verification.crudTest.insert?.error&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:e.verification.crudTest.insert.error})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[o(e.verification.crudTest.update?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"UPDATE"}),e.verification.crudTest.update?.error&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:e.verification.crudTest.update.error})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[o(e.verification.crudTest.delete?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"DELETE"}),e.verification.crudTest.delete?.error&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:e.verification.crudTest.delete.error})]})]})]})})]}),e.verification.relationships?.reportsItems&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Integridade dos Relacionamentos"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.verification.relationships.reportsItems?.success),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"Relat\xf3rios → Itens"}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:[e.verification.relationships.reportsItems?.totalReports||0," relat\xf3rios,"," ",e.verification.relationships.reportsItems?.reportsWithoutItems||0," sem itens"]})]})]})}),e.verification.relationships.reportsItems?.orphanedReports?.length&&e.verification.relationships.reportsItems.orphanedReports.length>0&&(0,t.jsxs)(x.Fc,{variant:"destructive",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsxs)(x.TN,{children:[(0,t.jsx)("strong",{children:"Relat\xf3rios sem itens encontrados:"}),(0,t.jsx)("ul",{className:"mt-2 list-disc list-inside",children:e.verification.relationships.reportsItems?.orphanedReports?.map(e=>(0,t.jsxs)("li",{className:"text-sm",children:[e.title," (ID: ",e.id,")"]},e.id))})]})]})]})})]})]})]})}var sb=a(562),sy=a(8803),sA=a(7125);function sw({data:e,currentHour:s}){let[a,n]=(0,r.useState)(null),[o,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)("overview");(0,r.useEffect)(()=>{u()},[e]);let u=async()=>{x(!0);try{let s=await fetch("/api/production?period=7");if(s.ok){let a=await s.json();if(a.success&&a.metrics){var e;let s=(e=a.metrics,a.data,{summary:{totalFormulas:e.overview.totalItems,totalValue:e.overview.totalValue,totalDays:7,avgFormulasPerDay:Math.round(e.overview.totalItems/7)},categories:Object.fromEntries(Object.entries(e.categories.distribution).map(([e,s])=>[e,s.count])),hourlyData:e.schedule.hourlyDistribution,vendorData:Object.fromEntries(Object.entries(e.vendors.performance).map(([e,s])=>[e,{formulas:s.count,value:s.value}])),performance:{efficiency:e.overview.efficiency,capacity_utilization:e.schedule.currentLoad,category_balance:Object.keys(e.categories.distribution).length>3?85:95,bottlenecks:e.bottlenecks.identified},recommendations:e.quality.recommendations.concat(e.bottlenecks.solutions),trends:{daily_volume:{current:Math.round(e.overview.totalItems/7),target:50,trend:e.overview.totalItems>200?"up":e.overview.totalItems<100?"down":"stable",change:5.2},category_balance:{current:Object.keys(e.categories.distribution).length,target:4,trend:"stable"}},sequencing:{suggested_order:e.schedule.recommendedSequence.map((e,s)=>({category:e.category,count:e.quantity,estimatedMinutes:e.estimatedTime*e.quantity,order:s+1})),total_estimated_time:{minutes:e.overview.estimatedProductionTime.minutes,hours:e.overview.estimatedProductionTime.hours,remaining_minutes:e.overview.estimatedProductionTime.minutes%60},efficiency_tips:e.quality.recommendations.slice(0,3)||["Otimizar sequenciamento","Balancear categorias","Melhorar distribui\xe7\xe3o hor\xe1ria"]},insights:{peak_hours:Object.entries(e.schedule.hourlyDistribution).sort((e,s)=>s[1]-e[1]).slice(0,5).map(([e,s])=>({hour:e,count:s})),top_categories:Object.entries(e.categories.distribution).sort((e,s)=>s[1].count-e[1].count).slice(0,5).map(([e,s])=>({category:e,count:s.count})),top_vendors:Object.entries(e.vendors.performance).sort((e,s)=>s[1].value-e[1].value).slice(0,5).map(([e,s])=>({vendor:e,formulas:s.count,value:s.value}))}});n(s),eh.oR.success(`Insights carregados com ${a.totalItems} itens de produ\xe7\xe3o`)}else console.warn("Dados insuficientes para insights de produ\xe7\xe3o:",a.error),a.error?.includes("Nenhum relat\xf3rio")||eh.oR.error("Erro ao carregar insights de produ\xe7\xe3o")}else eh.oR.error("Erro ao carregar insights de produ\xe7\xe3o")}catch(e){console.error("Erro ao carregar insights:",e),eh.oR.error("Erro ao carregar insights de produ\xe7\xe3o")}finally{x(!1)}};return o?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-3 text-white",children:[(0,t.jsx)(F.A,{className:"h-8 w-8 text-blue-400"}),"Gest\xe3o de Produ\xe7\xe3o"]}),(0,t.jsx)("p",{className:"text-slate-300",children:"Carregando insights de produ\xe7\xe3o..."})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)(l.Zp,{className:"animate-pulse",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsx)("div",{className:"h-16 bg-slate-700 rounded"})})},e))})]}):a?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-3 text-white",children:[(0,t.jsx)(F.A,{className:"h-8 w-8 text-blue-400"}),"Gest\xe3o de Produ\xe7\xe3o"]}),(0,t.jsx)("p",{className:"text-slate-300",children:"Sistema inteligente de otimiza\xe7\xe3o da produ\xe7\xe3o farmac\xeautica"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(d.E,{variant:"outline",className:"bg-green-500/20 text-green-300",children:[a.summary.totalFormulas," f\xf3rmulas processadas"]}),(0,t.jsx)(d.E,{variant:"outline",className:"bg-blue-500/20 text-blue-300",children:"Insights em tempo real"}),(0,t.jsxs)(c.$,{onClick:u,variant:"outline",size:"sm",children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(l.Zp,{className:"bg-blue-500/10 border-blue-500/30",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(z.A,{className:"h-8 w-8 text-blue-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Volume Di\xe1rio"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-300",children:a.summary.avgFormulasPerDay}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[function(e){switch(e){case"up":return(0,t.jsx)(sb.A,{className:"h-3 w-3 text-green-400"});case"down":return(0,t.jsx)(sy.A,{className:"h-3 w-3 text-red-400"});default:return(0,t.jsx)(sA.A,{className:"h-3 w-3 text-slate-400"})}}(a.trends.daily_volume.trend),(0,t.jsxs)("span",{className:"text-slate-400",children:["Meta: ",a.trends.daily_volume.target]})]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-green-500/10 border-green-500/30",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(es.A,{className:"h-8 w-8 text-green-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Efici\xeancia"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-300",children:[a.performance.efficiency,"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Balanceamento de categorias"})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-purple-500/10 border-purple-500/30",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(se.A,{className:"h-8 w-8 text-purple-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Capacidade"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-300",children:[a.performance.capacity_utilization,"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Utiliza\xe7\xe3o atual"})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-orange-500/10 border-orange-500/30",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ey.A,{className:"h-8 w-8 text-orange-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Tempo Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-300",children:[a.sequencing.total_estimated_time.hours,"h"]}),(0,t.jsxs)("p",{className:"text-xs text-slate-400",children:[a.sequencing.total_estimated_time.remaining_minutes,"min"]})]})]})})})]}),(0,t.jsxs)(i.tU,{value:m,onValueChange:h,children:[(0,t.jsxs)(i.j7,{className:"grid grid-cols-4 w-full",children:[(0,t.jsx)(i.Xi,{value:"overview",children:"Vis\xe3o Geral"}),(0,t.jsx)(i.Xi,{value:"sequencing",children:"Sequenciamento"}),(0,t.jsx)(i.Xi,{value:"performance",children:"Performance"}),(0,t.jsx)(i.Xi,{value:"insights",children:"Insights"})]}),(0,t.jsxs)(i.av,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-5 w-5"}),"Distribui\xe7\xe3o por Categoria"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(a.categories).map(([e,s])=>{let r=s/a.summary.totalFormulas*100,l=function(e){switch(e){case"L\xcdQUIDOS":return"bg-blue-500";case"HOMEOPATIA":return"bg-green-500";case"S\xd3LIDOS":return"bg-yellow-500";case"SEMI-S\xd3LIDOS":return"bg-orange-500";default:return"bg-gray-500"}}(e);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full ${l}`}),(0,t.jsx)("span",{className:"font-medium text-slate-200",children:e})]}),(0,t.jsxs)("span",{className:"text-slate-300",children:[s," (",r.toFixed(1),"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,t.jsx)("div",{className:`${l} h-2 rounded-full transition-all duration-300`,style:{width:`${r}%`}})})]},e)})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.A,{className:"h-5 w-5"}),"Hor\xe1rios de Pico"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:(a?.insights?.peak_hours||[]).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.E,{variant:"outline",className:"w-8 h-8 rounded-full p-0 flex items-center justify-center",children:s+1}),(0,t.jsx)("span",{className:"font-medium text-slate-200",children:e.hour})]}),(0,t.jsxs)("span",{className:"text-slate-300 font-bold",children:[e.count," f\xf3rmulas"]})]},e.hour))})})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-yellow-500"}),"Recomenda\xe7\xf5es de Otimiza\xe7\xe3o"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:a.recommendations.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-blue-300",children:e})},s))})})]})]}),(0,t.jsx)(i.av,{value:"sequencing",className:"space-y-6",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ee.A,{className:"h-5 w-5"}),"Sequenciamento Otimizado"]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"space-y-4",children:a.sequencing.suggested_order.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(d.E,{variant:"outline",className:"w-8 h-8 rounded-full p-0 flex items-center justify-center",children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-slate-200",children:e.category}),(0,t.jsxs)("p",{className:"text-sm text-slate-400",children:[e.count," f\xf3rmulas"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-slate-200",children:[e.estimatedMinutes," min"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"tempo estimado"})]})]},e.category))}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-green-300 mb-2",children:"Dicas de Efici\xeancia"}),(0,t.jsx)("ul",{className:"space-y-1",children:a.sequencing.efficiency_tips.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-green-200",children:["• ",e]},s))})]})]})]})}),(0,t.jsxs)(i.av,{value:"performance",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-sm",children:"Efici\xeancia"})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[a.performance.efficiency,"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Balanceamento ideal: 100%"})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-sm",children:"Utiliza\xe7\xe3o"})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-400",children:[a.performance.capacity_utilization,"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Capacidade atual"})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-sm",children:"Desvio Categorias"})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-400",children:[a.performance.category_balance,"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Menor \xe9 melhor"})]})]})]}),a.performance.bottlenecks.length>0&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-red-500"}),"Gargalos Identificados"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-2",children:a.performance.bottlenecks.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-300",children:e})},s))})})]})]}),(0,t.jsx)(i.av,{value:"insights",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Top Categorias"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:(a?.insights?.top_categories||[]).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.E,{variant:"outline",children:s+1}),(0,t.jsx)("span",{className:"text-slate-200",children:e.category})]}),(0,t.jsx)("span",{className:"font-bold text-slate-300",children:e.count})]},e.category))})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Top Vendedores"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:(a?.insights?.top_vendors||[]).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.E,{variant:"outline",children:s+1}),(0,t.jsx)("span",{className:"text-slate-200",children:e.vendor})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-bold text-slate-300",children:e.formulas}),(0,t.jsxs)("div",{className:"text-xs text-slate-400",children:["R$ ",e.value.toFixed(2)]})]})]},e.vendor))})})]})]})})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-3 text-white",children:[(0,t.jsx)(F.A,{className:"h-8 w-8 text-blue-400"}),"Gest\xe3o de Produ\xe7\xe3o"]}),(0,t.jsx)("p",{className:"text-slate-300",children:"Sistema de monitoramento e otimiza\xe7\xe3o da produ\xe7\xe3o farmac\xeautica"})]})}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"h-5 w-5"}),"Dashboard de Produ\xe7\xe3o"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,t.jsx)(F.A,{className:"mx-auto h-16 w-16 mb-4 opacity-20"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"Nenhum dado de produ\xe7\xe3o dispon\xedvel"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Processe relat\xf3rios para visualizar insights e m\xe9tricas de produ\xe7\xe3o"})]})})]})]})}function sE({period:e=30}){let[s,a]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(new Date),[h,p]=(0,r.useState)("overview");(0,r.useEffect)(()=>{j();let e=setInterval(j,3e5);return()=>clearInterval(e)},[e]);let j=async()=>{o(!0);try{let s=await fetch(`/api/executive-dashboard?period=${e}`),t=await s.json();t.success&&t.metrics?(a(t.metrics),m(new Date),eh.oR.success(`Dashboard atualizado com ${t.reportsAnalyzed} relat\xf3rios`)):(console.warn("Dados insuficientes para dashboard:",t.error),t.error?.includes("Nenhum relat\xf3rio")||eh.oR.error("Erro ao carregar m\xe9tricas executivas"))}catch(e){console.error("Erro ao carregar m\xe9tricas:",e),eh.oR.error("Erro ao conectar com o servidor")}finally{o(!1)}};if(n)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Dashboard Executivo"}),(0,t.jsx)("p",{className:"text-slate-300",children:"Carregando m\xe9tricas estrat\xe9gicas..."})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)(l.Zp,{className:"animate-pulse",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsx)("div",{className:"h-20 bg-slate-700 rounded"})})},e))})]});if(!s)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Dashboard Executivo"}),(0,t.jsx)("p",{className:"text-slate-300",children:"Sistema de Business Intelligence Farmac\xeautico"})]})}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-orange-500"}),"Dados Insuficientes"]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"N\xe3o h\xe1 dados suficientes para gerar o dashboard executivo. Processe relat\xf3rios para visualizar m\xe9tricas estrat\xe9gicas."}),(0,t.jsxs)(c.$,{onClick:j,children:[(0,t.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]})]})]})]});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Dashboard Executivo"}),(0,t.jsxs)("p",{className:"text-slate-300",children:["Intelig\xeancia de neg\xf3cios baseada em dados reais • \xdaltima atualiza\xe7\xe3o: ",x.toLocaleTimeString()]}),s?.summary&&(0,t.jsxs)("p",{className:"text-slate-400 text-sm",children:["Analisando ",s.summary.totalReports," relat\xf3rios • Top vendedor: ",s.summary.topSeller," • Qualidade dos dados: ",s.summary.dataQuality]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(d.E,{variant:"outline",className:"bg-green-500/20 text-green-300",children:["Per\xedodo: ",e," dias"]}),(0,t.jsxs)(c.$,{onClick:j,variant:"outline",size:"sm",children:[(0,t.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]})]}),s.risks.alerts.length>0&&(0,t.jsxs)(l.Zp,{className:"border-orange-500/50 bg-orange-500/5",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2 text-orange-300",children:[(0,t.jsx)(S.A,{className:"h-5 w-5"}),"Alertas Cr\xedticos (",s.risks.alerts.length,")"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-2",children:s.risks.alerts.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-orange-200",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e]},s))})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/30",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-green-500/20 rounded-lg",children:(0,t.jsx)(U.A,{className:"h-8 w-8 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-green-200",children:"Receita Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-300",children:["R$ ",(s.financial.totalRevenue/1e3).toFixed(0),"K"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[g(s.financial.revenueGrowth),(0,t.jsxs)("span",{className:"text-green-200",children:[Math.abs(s.financial.revenueGrowth).toFixed(1),"%"]})]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/30",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:(0,t.jsx)(es.A,{className:"h-8 w-8 text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-blue-200",children:"Margem L\xedquida"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-300",children:[s.financial.netMargin.toFixed(1),"%"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[g(s.financial.profitGrowth),(0,t.jsxs)("span",{className:"text-blue-200",children:["Lucro: ",Math.abs(s.financial.profitGrowth).toFixed(1),"%"]})]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/5 border-purple-500/30",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:(0,t.jsx)(se.A,{className:"h-8 w-8 text-purple-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-purple-200",children:"Efici\xeancia"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-300",children:[s.operational.utilizationRate.toFixed(0),"%"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,t.jsx)(R.A,{className:"h-3 w-3 text-green-400"}),(0,t.jsxs)("span",{className:"text-purple-200",children:["Qualidade: ",s.operational.qualityScore.toFixed(0),"%"]})]})]})]})})}),(0,t.jsx)(l.Zp,{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/5 border-orange-500/30",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:(0,t.jsx)(u.A,{className:"h-8 w-8 text-orange-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-orange-200",children:"Pr\xf3ximo M\xeas"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-300",children:["R$ ",(s.forecasting.nextMonthRevenue/1e3).toFixed(0),"K"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,t.jsx)(P.A,{className:"h-3 w-3 text-orange-400"}),(0,t.jsxs)("span",{className:"text-orange-200",children:["Confian\xe7a: ",s.forecasting.confidence,"%"]})]})]})]})})})]}),(0,t.jsxs)(i.tU,{value:h,onValueChange:p,children:[(0,t.jsxs)(i.j7,{className:"grid grid-cols-4 w-full",children:[(0,t.jsx)(i.Xi,{value:"overview",children:"Vis\xe3o Geral"}),(0,t.jsx)(i.Xi,{value:"financial",children:"Financeiro"}),(0,t.jsx)(i.Xi,{value:"operations",children:"Opera\xe7\xf5es"}),(0,t.jsx)(i.Xi,{value:"strategy",children:"Estrat\xe9gia"})]}),(0,t.jsxs)(i.av,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-5 w-5"}),"Performance Geral"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Utiliza\xe7\xe3o de Capacidade"}),(0,t.jsxs)("span",{children:[s.operational.utilizationRate.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.operational.utilizationRate,className:"h-2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Margem de Lucro"}),(0,t.jsxs)("span",{children:[s.financial.netMargin.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.financial.netMargin,className:"h-2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Qualidade"}),(0,t.jsxs)("span",{children:[s.operational.qualityScore.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.operational.qualityScore,className:"h-2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Previs\xe3o (Confian\xe7a)"}),(0,t.jsxs)("span",{children:[s.forecasting.confidence,"%"]})]}),(0,t.jsx)(eE,{value:s.forecasting.confidence,className:"h-2"})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5"}),"Avalia\xe7\xe3o de Riscos"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Score de Risco Geral"}),(0,t.jsxs)(d.E,{variant:s.risks.riskScore>70?"destructive":s.risks.riskScore>40?"secondary":"default",children:[s.risks.riskScore.toFixed(0),"/100"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Concentra\xe7\xe3o"}),(0,t.jsxs)("span",{children:[s.risks.concentration.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.risks.concentration,className:"h-2"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Volatilidade"}),(0,t.jsxs)("span",{children:[s.risks.volatility.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:Math.min(100,s.risks.volatility),className:"h-2"})]}),(0,t.jsxs)("div",{className:"pt-2 border-t",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-2",children:"Gargalos Identificados:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.E,{variant:"outline",children:s.optimization.bottlenecks}),(0,t.jsx)("span",{className:"text-xs text-slate-300",children:"pontos cr\xedticos"})]})]})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"h-5 w-5"}),"Oportunidades de Otimiza\xe7\xe3o"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-green-500/10 rounded-lg border border-green-500/30",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:["R$ ",(s.optimization.potentialSavings/1e3).toFixed(0),"K"]}),(0,t.jsx)("div",{className:"text-sm text-green-200",children:"Economia Potencial"})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-400",children:[s.optimization.setupReduction.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-blue-200",children:"Redu\xe7\xe3o Setup"})]}),(0,t.jsxs)("div",{className:"p-4 bg-purple-500/10 rounded-lg border border-purple-500/30",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:s.opportunities.pricingOptimization}),(0,t.jsx)("div",{className:"text-sm text-purple-200",children:"Ajustes de Pre\xe7o"})]}),(0,t.jsxs)("div",{className:"p-4 bg-orange-500/10 rounded-lg border border-orange-500/30",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-400",children:[s.opportunities.roi.toFixed(1),"x"]}),(0,t.jsx)("div",{className:"text-sm text-orange-200",children:"ROI M\xe9dio"})]})]})})]})]}),(0,t.jsx)(i.av,{value:"financial",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zp,{className:"lg:col-span-2",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Resumo Financeiro"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Receita Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:["R$ ",s.financial.totalRevenue.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Lucro Bruto"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:["R$ ",s.financial.grossProfit.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t",children:[(0,t.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Crescimento vs Per\xedodo Anterior"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[g(s.financial.revenueGrowth),(0,t.jsxs)("span",{children:["Receita: ",s.financial.revenueGrowth.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[g(s.financial.profitGrowth),(0,t.jsxs)("span",{children:["Lucro: ",s.financial.profitGrowth.toFixed(1),"%"]})]})]})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Previs\xf5es"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Pr\xf3ximo M\xeas"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:["R$ ",s.forecasting.nextMonthRevenue.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:["Confian\xe7a: ",s.forecasting.confidence,"%"]})]}),(0,t.jsxs)("div",{className:"pt-2 border-t",children:[(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Tend\xeancia"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[g(s.forecasting.growthTrend),(0,t.jsx)("span",{className:"capitalize",children:s.forecasting.growthTrend})]})]})]})]})]})}),(0,t.jsx)(i.av,{value:"operations",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Efici\xeancia Operacional"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Utiliza\xe7\xe3o da Capacidade"}),(0,t.jsxs)("span",{children:[s.operational.utilizationRate.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.operational.utilizationRate})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Ganho de Efici\xeancia"}),(0,t.jsxs)("span",{children:[s.operational.efficiencyGain.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:Math.max(0,s.operational.efficiencyGain)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Score de Qualidade"}),(0,t.jsxs)("span",{children:[s.operational.qualityScore.toFixed(1),"%"]})]}),(0,t.jsx)(eE,{value:s.operational.qualityScore})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Otimiza\xe7\xf5es Dispon\xedveis"})}),(0,t.jsxs)(l.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-500/10 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Redu\xe7\xe3o de Setup"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Sequenciamento otimizado"})]}),(0,t.jsxs)(d.E,{children:[s.optimization.setupReduction.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-green-500/10 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Economia Potencial"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"Otimiza\xe7\xf5es de custo"})]}),(0,t.jsxs)(d.E,{children:["R$ ",(s.optimization.potentialSavings/1e3).toFixed(0),"K"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-orange-500/10 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Recomenda\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"A\xe7\xf5es sugeridas"})]}),(0,t.jsx)(d.E,{children:s.optimization.recommendations})]})]})]})]})}),(0,t.jsx)(i.av,{value:"strategy",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Oportunidades de Mercado"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Categorias Sub-performantes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:s.opportunities.underperformingCategories}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"categorias com potencial de melhoria"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Otimiza\xe7\xe3o de Pre\xe7os"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:s.opportunities.pricingOptimization}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"produtos com potencial de aumento"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Crescimento de Mercado"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[s.opportunities.marketGrowth.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"potencial de expans\xe3o"})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Recomenda\xe7\xf5es Estrat\xe9gicas"})}),(0,t.jsxs)(l.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-green-300",children:"\uD83D\uDCA1 Expans\xe3o de Capacidade"}),(0,t.jsx)("p",{className:"text-sm text-green-200",children:"Considerar expans\xe3o nos hor\xe1rios de pico identificados"})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-blue-300",children:"\uD83D\uDCCA Otimiza\xe7\xe3o de Pre\xe7os"}),(0,t.jsxs)("p",{className:"text-sm text-blue-200",children:[s.opportunities.pricingOptimization," produtos com potencial de aumento"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-purple-300",children:"⚡ Efici\xeancia Operacional"}),(0,t.jsxs)("p",{className:"text-sm text-purple-200",children:["ROI m\xe9dio de ",s.opportunities.roi.toFixed(1),"x nas otimiza\xe7\xf5es"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-orange-300",children:"\uD83C\uDFAF Diversifica\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-sm text-orange-200",children:"Reduzir concentra\xe7\xe3o de risco em categorias principais"})]})]})]})]})})]})]});function g(e){if("string"==typeof e)switch(e){case"up":return(0,t.jsx)(sb.A,{className:"h-3 w-3 text-green-400"});case"down":return(0,t.jsx)(sy.A,{className:"h-3 w-3 text-red-400"});default:return(0,t.jsx)(sA.A,{className:"h-3 w-3 text-slate-400"})}return e>2?(0,t.jsx)(sb.A,{className:"h-3 w-3 text-green-400"}):e<-2?(0,t.jsx)(sy.A,{className:"h-3 w-3 text-red-400"}):(0,t.jsx)(sA.A,{className:"h-3 w-3 text-slate-400"})}}function sO({user:e}){let[s,a]=(0,r.useState)("table"),[u,p]=(0,r.useState)(!1),[j,g]=(0,r.useState)(""),[f,N]=(0,r.useState)(void 0),[v,b]=(0,r.useState)(""),[y,A]=(0,r.useState)(!1),[U,z]=(0,r.useState)("idle"),[W,q]=(0,r.useState)(""),[Q,X]=(0,r.useState)(null),[J,K]=(0,r.useState)(null),[Y,ee]=(0,r.useState)(null),[es,ea]=(0,r.useState)(null),[et,er]=(0,r.useState)("daily"),[el,ei]=(0,r.useState)(null),[ec,en]=(0,r.useState)(!1),[eo,ed]=(0,r.useState)(!1),[ex,em]=(0,r.useState)(""),[eh,eu]=(0,r.useState)(""),[ep,ej]=(0,r.useState)(null),[eg,ef]=(0,r.useState)({totalQuantity:0,totalValue:0,solidCount:0,topSeller:"—",formulasProcessed:0}),[eN,ev]=(0,r.useState)([]),[ey,ew]=(0,r.useState)([]),[eE,eC]=(0,r.useState)(null),[eR,eS]=(0,r.useState)([]),[eL,eD]=(0,r.useState)(!1),[eM,eT]=(0,r.useState)(null),[eI,eP]=(0,r.useState)(!1),[ek,eF]=(0,r.useState)(!1),[e$,eB]=(0,r.useState)([]),[eZ,eV]=(0,r.useState)(null),[eG,ez]=(0,r.useState)([]),[eH,eq]=(0,r.useState)(null),eQ=e=>{eT(e),eD(!0)},eX=async s=>{if(eZ)try{let a={...v?JSON.parse(v):{},...s};if(b(JSON.stringify(a,null,2)),e?.id){let a=Object.entries(s).map(([s,a])=>({user_id:e.id,original_form:s,mapped_category:a,mapping_source:"manual"}));await e3.saveMappings(a),console.log("✅ Mapeamentos salvos no banco de dados")}eF(!1),eB([]),await eJ(eZ,a)}catch(e){console.error("Erro ao aplicar mapeamentos interativos:",e),z("error"),q("Erro ao aplicar mapeamentos durante processamento"),p(!1)}finally{eV(null)}},eJ=async(e,s)=>{try{q("Continuando processamento com mapeamentos...");let t=new FormData;t.append("diario",e.diarioFile),t.append("controle",e.controleFile),e.date&&t.append("date",e.date),t.append("mapping",JSON.stringify(s));let r=e.isPeriod?"/api/process-period":"/api/process-report",l=await fetch(r,{method:"POST",body:t,credentials:"same-origin"}),i=await l.json();if(!l.ok)throw Error(i.error||`Erro HTTP ${l.status}: ${l.statusText}`);e.isPeriod?(z("success"),q(`${i.processedReports?.length||0} relat\xf3rios processados com sucesso! Verifique o hist\xf3rico.`),eS(Array.isArray(i.unmappedData)?i.unmappedData:[])):(ej(i),ef({totalQuantity:"number"==typeof i.kpis?.totalQuantity?i.kpis.totalQuantity:0,totalValue:"number"==typeof i.kpis?.totalValue?i.kpis.totalValue:0,solidCount:"number"==typeof i.kpis?.solidCount?i.kpis.solidCount:0,topSeller:i.kpis?.topSeller||"—",formulasProcessed:"number"==typeof i.kpis?.formulasProcessed?i.kpis.formulasProcessed:0}),ev(Array.isArray(i.tableRows)?i.tableRows:[]),ew(Array.isArray(i.sellersData)?i.sellersData:[]),eC(i.kanbanData||null),eS(Array.isArray(i.unmappedData)?i.unmappedData:[]),z("success"),q("Dados processados com sucesso!")),a("table"),setTimeout(()=>{e2()},1e3)}catch(e){console.error("Erro ao continuar processamento:",e),z("error"),q(e.message||"Erro ao continuar processamento")}finally{p(!1)}},eK=async e=>{try{let s=new FormData;s.append("diario",e.diarioFile),s.append("controle",e.controleFile),e.date&&s.append("date",e.date);let a=v||"{}";s.append("mapping",a),s.append("checkOnly","true");let t=e.isPeriod?"/api/process-period":"/api/process-report",r=await fetch(t,{method:"POST",body:s,credentials:"same-origin"}),l=await r.json();if(l.unmappedData&&l.unmappedData.length>0)return eB(l.unmappedData),eV(e),eF(!0),q("Aguardando mapeamento de itens n\xe3o reconhecidos..."),!0;return!1}catch(e){return console.error("Erro ao verificar itens n\xe3o mapeados:",e),!1}},eY=async s=>{if(!Q||!J){z("error"),q("Por favor, fa\xe7a upload dos dois arquivos primeiro");return}p(!0),z("idle");try{let t={...v?JSON.parse(v):{},...s};if(b(JSON.stringify(t,null,2)),e?.id){let a=Object.entries(s).map(([s,a])=>({user_id:e.id,original_form:s,mapped_category:a,mapping_source:"manual"}));await e3.saveMappings(a),console.log("✅ Mapeamentos manuais salvos no banco de dados")}let r=new FormData;r.append("diario",Q),r.append("controle",J),r.append("date",j),r.append("mapping",JSON.stringify(t));let l=await fetch("/api/process-report",{method:"POST",body:r}),i=await l.json();if(!l.ok)throw Error(i.error||"Erro no reprocessamento");ej(i),ef(i.kpis||{totalQuantity:0,totalValue:0,solidCount:0,topSeller:"—"}),ev(i.tableData||[]),ew(i.sellersData||[]),eC(i.kanbanData||null),eS(i.unmappedData||[]),z("success"),q("Mapeamentos aplicados e dados reprocessados com sucesso!"),a("table"),e2()}catch(e){console.error("Erro no reprocessamento:",e),z("error"),q(e instanceof Error?e.message:"Erro no reprocessamento")}finally{p(!1)}};(0,r.useEffect)(()=>{try{let e=new Date,s=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),t=`${s}/${a}`;g(t)}catch(e){console.error("Erro ao definir data padr\xe3o:",e),g("01/01")}e2(),e0(),e1()},[]);let e0=async()=>{if(!e?.id)return void console.log("ℹ️ Usu\xe1rio n\xe3o logado - carregamento de mapeamentos ignorado");try{console.log("\uD83D\uDD04 Carregando mapeamentos do usu\xe1rio:",e.id);let s=await e3.getUserMappings(e.id);Object.keys(s).length>0?(b(JSON.stringify(s,null,2)),console.log("✅ Mapeamentos carregados do banco de dados:",Object.keys(s).length,"itens")):console.log("ℹ️ Nenhum mapeamento encontrado para o usu\xe1rio")}catch(e){console.error("❌ Erro ao carregar mapeamentos salvos:",e)}},e1=async()=>{try{console.log("\uD83D\uDD04 Carregando dados de produ\xe7\xe3o...");let e=await fetch("/api/production",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"});if(e.ok){let s=await e.json();s.success&&s.data?(console.log("✅ Dados de produ\xe7\xe3o carregados:",s.data.length,"itens"),ez(s.data),eq(s.insights)):(console.log("⚠️ Nenhum dado de produ\xe7\xe3o encontrado"),ez([]),eq(null))}else console.error("❌ Erro na API de produ\xe7\xe3o:",e.status),ez([]),eq(null)}catch(e){console.error("❌ Erro ao carregar dados de produ\xe7\xe3o:",e),ez([]),eq(null)}},e2=async()=>{try{console.log("\uD83D\uDD04 Carregando \xfaltimo processamento...");let e=await fetch("/api/last-processing",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"});if(console.log("\uD83D\uDCE1 Resposta da API:",e.status,e.statusText),e.ok){let s=await e.json();if(console.log("\uD83D\uDCCA Dados recebidos:",s),s?.success&&s?.data){console.log("✅ Dados v\xe1lidos encontrados:",{reportDate:s.data.report_date,totalQuantity:s.data.total_quantity,totalValue:s.data.total_value});let e={reportDate:s.data.report_date,processedAt:s.data.processed_at,totalQuantity:s.data.total_quantity,totalValue:s.data.total_value,solidCount:s.data.solid_count,topSeller:s.data.top_seller,diarioFileName:s.data.diario_file_name,controleFileName:s.data.controle_file_name};console.log("\uD83D\uDD04 Dados transformados para camelCase:",e),ei(e);try{let e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),r=(s.data.report_date||"").includes(`/${t}`);en(r),a("table"),setTimeout(()=>{e6()},500)}catch(e){console.error("Erro ao processar data:",e),en(!1)}}else console.log("⚠️ Nenhum dado de processamento encontrado"),ei(null),en(!1)}else{console.error("❌ Erro na API:",e.status,e.statusText);let s=await e.text();console.error("❌ Detalhes do erro:",s),ei(null),en(!1)}}catch(e){console.error("❌ Erro em loadLastProcessing:",e),ei(null),en(!1)}},e4=async(e,s,t=!1)=>{t||(z("idle"),q(""));try{let r=await fetch(`/api/history/${e}`);if(!r.ok)throw Error("Erro ao buscar relat\xf3rio hist\xf3rico");let l=await r.json();if(!l.success)throw Error(l.error||"Erro desconhecido");let{processedData:i}=l.data;ej(i),ev(i.tableRows||[]),ef({totalQuantity:i.kpis?.totalQuantity||0,totalValue:i.kpis?.totalValue||0,solidCount:i.kpis?.solidCount||0,topSeller:i.kpis?.topSeller||"",formulasProcessed:i.kpis?.formulasProcessed||0}),ew(i.sellersData||[]),eC(i.kanbanData||null),eS(i.unmappedData||[]),ed(!0),em(s),eu(e),t||(z("success"),q(`Dados hist\xf3ricos carregados: ${s}`),a("table"))}catch(e){t?console.error("❌ Erro no carregamento silencioso:",e):(z("error"),q(e.message||"Erro ao carregar dados hist\xf3ricos"))}},e5=()=>{ed(!1),em(""),eu(""),z("idle"),q(""),(!ep||eo)&&(ej(null),ev([]),ef({totalQuantity:0,totalValue:0,solidCount:0,topSeller:"",formulasProcessed:0}),ew([]),eC(null),eS([]))},e6=async()=>{try{console.log("\uD83D\uDD04 Auto-carregando \xfaltimo relat\xf3rio...");let e=await fetch("/api/history?limit=1"),s=await e.json();if(s.success&&s.reports&&s.reports.length>0){let e=s.reports[0];console.log("\uD83D\uDCCA Auto-carregando relat\xf3rio:",e.id,"Data:",e.date),await e4(e.id,e.date,!0)}else console.log("⚠️ Nenhum relat\xf3rio encontrado para auto-carregamento")}catch(e){console.error("❌ Erro no auto-carregamento:",e)}},e9=async()=>{if(!el||!el.reportDate)return void console.log("⚠️ Nenhum \xfaltimo processamento dispon\xedvel");try{z("idle"),q("Carregando \xfaltimo relat\xf3rio...");let e=await fetch("/api/history?limit=1"),s=await e.json();if(s.success&&s.reports&&s.reports.length>0){let e=s.reports[0];console.log("\uD83D\uDCCA Carregando relat\xf3rio:",e.id,"Data:",e.date),await e4(e.id,e.date)}else console.log("❌ Nenhum relat\xf3rio encontrado no hist\xf3rico"),z("error"),q("Nenhum relat\xf3rio encontrado no hist\xf3rico")}catch(e){console.error("❌ Erro ao carregar \xfaltimo relat\xf3rio:",e),z("error"),q("Erro ao carregar \xfaltimo relat\xf3rio")}},se=async()=>{if(!Q||!J){z("error"),q("Por favor, fa\xe7a upload dos dois arquivos (Di\xe1rio e Controle)");return}if(!j||""===j.trim()){z("error"),q("Por favor, defina uma data para o relat\xf3rio");return}p(!0),z("idle"),q("Verificando itens n\xe3o mapeados...");let e={diarioFile:Q,controleFile:J,date:j.trim(),isPeriod:!1};await eK(e)||(q("Processando dados..."),await eJ(e,JSON.parse(v||"{}")))},ss=async()=>{if(!Y||!es){z("error"),q("Por favor, fa\xe7a upload dos dois arquivos (Di\xe1rio e Controle) para o per\xedodo");return}p(!0),z("idle"),q("Verificando itens n\xe3o mapeados...");let e={diarioFile:Y,controleFile:es,isPeriod:!0};await eK(e)||(q("Processando arquivos por per\xedodo..."),await eJ(e,JSON.parse(v||"{}")))},sa=async()=>{if(!ep){z("error"),q("Nenhum relat\xf3rio para salvar. Processe os dados primeiro.");return}if(!j||""===j.trim()){z("error"),q("Data do relat\xf3rio \xe9 obrigat\xf3ria");return}try{z("idle"),q("Salvando relat\xf3rio...");let e={title:`Relat\xf3rio ${j.trim()}`,date:j.trim(),items:Array.isArray(ep.items)?ep.items:eN,kpis:{totalQuantity:"number"==typeof eg.totalQuantity?eg.totalQuantity:0,totalValue:"number"==typeof eg.totalValue?eg.totalValue:0,solidCount:"number"==typeof eg.solidCount?eg.solidCount:0,topSeller:eg.topSeller||"—"},sellersData:Array.isArray(ey)?ey:[],kanbanData:eE||{}},s=await fetch("/api/save-report",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw Error(a.error||"Erro ao salvar");z("success"),q("Relat\xf3rio salvo no hist\xf3rico!")}catch(e){z("error"),q(e.message||"Erro ao salvar relat\xf3rio")}},st=async e=>{if(!ep){z("error"),q("Nenhum dado para exportar");return}try{let s=await fetch(`/api/export-report?format=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ep)});if(!s.ok)throw Error("Erro na exporta\xe7\xe3o");let a=await s.blob(),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`relatorio_${j}.${e}`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r),z("success"),q(`Arquivo ${e.toUpperCase()} exportado!`)}catch(e){z("error"),q(e.message||"Erro na exporta\xe7\xe3o")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Dashboard de Automa\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-slate-300",children:"Sistema de processamento de relat\xf3rios Excel"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(d.E,{variant:"success"===U?"default":"error"===U?"destructive":"secondary",children:["idle"===U&&"Aguardando dados","success"===U&&"Processado","error"===U&&"Erro"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>st("csv"),disabled:!ep,className:"gap-2",children:[(0,t.jsx)(O.A,{className:"h-4 w-4"}),"CSV"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>st("xlsx"),disabled:!ep,className:"gap-2",children:[(0,t.jsx)(O.A,{className:"h-4 w-4"}),"XLSX"]}),(0,t.jsxs)(c.$,{size:"sm",onClick:sa,disabled:!ep,className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),"Salvar"]})]})]})]}),"idle"!==U&&(0,t.jsx)(x.Fc,{variant:"error"===U?"destructive":"default",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["success"===U?(0,t.jsx)(R.A,{className:"h-4 w-4"}):(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)(x.TN,{children:W})]})})]}),(0,t.jsx)(H,{data:eg,isLoading:u}),(0,t.jsx)(E.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(i.tU,{value:s,onValueChange:a,children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-9 bg-slate-800/50",children:[(0,t.jsxs)(i.Xi,{value:"upload",className:`gap-2 ${!ec?"bg-orange-500 text-white hover:bg-orange-600 animate-pulse":""}`,children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),"Upload",!ec&&(0,t.jsx)(d.E,{variant:"secondary",className:"ml-1 bg-white text-orange-500 text-xs",children:"!"})]}),(0,t.jsxs)(i.Xi,{value:"table",className:"gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),"Tabela"]}),(0,t.jsxs)(i.Xi,{value:"kanban",className:"gap-2",disabled:!ep,children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),"Kanban"]}),(0,t.jsxs)(i.Xi,{value:"sellers",className:"gap-2",disabled:!ep,children:[(0,t.jsx)(T.A,{className:"h-4 w-4"}),"Vendedores"]}),(0,t.jsxs)(i.Xi,{value:"history",className:"gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),"Hist\xf3rico"]}),(0,t.jsxs)(i.Xi,{value:"analytics",className:"gap-2 relative",children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),"An\xe1lise",(0,t.jsx)(d.E,{variant:"secondary",className:"ml-1 bg-green-100 text-green-700 text-xs px-1 py-0",children:"Ativo"})]}),(0,t.jsxs)(i.Xi,{value:"diagnostics",className:"gap-2",children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),"Diagn\xf3sticos"]}),(0,t.jsxs)(i.Xi,{value:"production",className:"gap-2",children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),"Produ\xe7\xe3o"]}),(0,t.jsxs)(i.Xi,{value:"executive",className:"gap-2",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),"Executivo"]})]}),(0,t.jsxs)(i.av,{value:"upload",className:"mt-6",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-5 w-5"}),"Modo de Upload"]}),(0,t.jsx)(l.BT,{children:"Escolha como deseja fazer o upload dos arquivos"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(c.$,{variant:"daily"===et?"default":"outline",className:"h-auto p-4 justify-start",onClick:()=>er("daily"),children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Upload Di\xe1rio"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Processar arquivo de uma data espec\xedfica"})]})}),(0,t.jsx)(c.$,{variant:"period"===et?"default":"outline",className:"h-auto p-4 justify-start",onClick:()=>er("period"),children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Upload por Per\xedodo"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Processar arquivo com m\xfaltiplas datas"})]})})]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[(0,t.jsx)("div",{className:"space-y-6",children:"daily"===et?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"Di\xe1rio de Receitas"]}),(0,t.jsx)(l.BT,{children:"Arquivo Excel (.xlsx) com dados de receitas de uma data"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(G,{file:Q,onFileChange:X,onPreview:eQ,accept:".xlsx",label:"Di\xe1rio de Receitas"})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Controle de F\xf3rmulas"]}),(0,t.jsx)(l.BT,{children:"Arquivo Excel (.xlsx) com controle de f\xf3rmulas de uma data"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(G,{file:J,onFileChange:K,onPreview:eQ,accept:".xlsx",label:"Controle de F\xf3rmulas"})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"Di\xe1rio de Receitas (Per\xedodo)"]}),(0,t.jsx)(l.BT,{children:"Arquivo Excel (.xlsx) com dados de receitas de m\xfaltiplas datas"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(G,{file:Y,onFileChange:ee,onPreview:eQ,accept:".xlsx",label:"Di\xe1rio de Receitas (Per\xedodo)"})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Controle de F\xf3rmulas (Per\xedodo)"]}),(0,t.jsx)(l.BT,{children:"Arquivo Excel (.xlsx) com controle de f\xf3rmulas de m\xfaltiplas datas"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(G,{file:es,onFileChange:ea,onPreview:eQ,accept:".xlsx",label:"Controle de F\xf3rmulas (Per\xedodo)"})})]})]})}),(0,t.jsx)("div",{className:"lg:sticky lg:top-24",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-5 w-5"}),"Configura\xe7\xf5es e A\xe7\xe3o"]}),(0,t.jsx)(l.BT,{children:"Data, mapeamento e processamento"})]}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:["daily"===et?(0,t.jsxs)("div",{children:[(0,t.jsx)(n.J,{htmlFor:"date",children:"Data do Relat\xf3rio"}),(0,t.jsx)(w,{date:f,onDateChange:e=>{N(e),e?g((0,m.GP)(e,"dd/MM",{locale:h.F})):g("")},placeholder:"Selecione a data do relat\xf3rio"}),j&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Data selecionada: ",j]})]}):(0,t.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)(B.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Upload por Per\xedodo"})]}),(0,t.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"O sistema detectar\xe1 automaticamente as datas nos arquivos e criar\xe1 relat\xf3rios individuais para cada data encontrada."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>A(!y),children:[y?"Ocultar":"Mostrar"," Mapeamento"]}),y&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(o.T,{placeholder:"Cole aqui o JSON de mapeamento...",value:v,onChange:e=>b(e.target.value),className:"h-32 font-mono text-sm"})})]}),eR&&eR.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>eP(!eI),className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),eI?"Ocultar":"Mostrar"," Itens N\xe3o Mapeados (",eR.length,")"]}),eI&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(eW,{unmappedData:eR,onApplyMappings:"daily"===et?eY:void 0,isProcessing:u,showMappingOnly:"period"===et})})]}),"daily"===et?(0,t.jsx)(c.$,{onClick:se,disabled:u||!Q||!J,className:"w-full gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.A,{className:"h-4 w-4"}),"Processar Dados"]})}):(0,t.jsx)(c.$,{onClick:ss,disabled:u||!Y||!es,className:"w-full gap-2 bg-green-600 hover:bg-green-700 text-white",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processando Per\xedodo..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),"Processar Per\xedodo"]})})]})]})})]})]}),(0,t.jsxs)(i.av,{value:"table",children:[eo?(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-full",children:(0,t.jsx)(I.A,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900",children:"Visualizando Dados Hist\xf3ricos"}),(0,t.jsxs)("p",{className:"text-sm text-purple-700",children:["Relat\xf3rio do dia: ",(0,t.jsx)("span",{className:"font-medium",children:ex})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>a("history"),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mr-1"}),"Ver Hist\xf3rico"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:e5,className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Voltar ao Atual"]})]})]})})}):el&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(e7,{data:el,onViewHistory:()=>a("history")}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:e9,className:"flex items-center gap-2 bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),"Visualizar \xdaltimo Relat\xf3rio"]})})]}),eN&&eN.length>0?(0,t.jsx)(eb,{data:eN,totalProcessedFormulas:eg.formulasProcessed}):(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsx)(D.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum dado processado"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:eo?"Este relat\xf3rio hist\xf3rico n\xe3o possui dados de tabela.":ec?"Fa\xe7a o upload dos arquivos para ver os dados da tabela.":"N\xe3o h\xe1 dados processados do m\xeas atual. Fa\xe7a o upload dos arquivos para come\xe7ar."}),!eo&&(0,t.jsxs)(c.$,{onClick:()=>a("upload"),className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),"Ir para Upload"]})]})})]}),(0,t.jsxs)(i.av,{value:"kanban",children:[eo&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-full",children:(0,t.jsx)(I.A,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900",children:"Visualizando Dados Hist\xf3ricos"}),(0,t.jsxs)("p",{className:"text-sm text-purple-700",children:["Relat\xf3rio do dia: ",(0,t.jsx)("span",{className:"font-medium",children:ex})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>a("history"),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mr-1"}),"Ver Hist\xf3rico"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:e5,className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Voltar ao Atual"]})]})]})})}),(0,t.jsx)(eA,{data:eE})]}),(0,t.jsxs)(i.av,{value:"sellers",children:[eo&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-full",children:(0,t.jsx)(I.A,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900",children:"Visualizando Dados Hist\xf3ricos"}),(0,t.jsxs)("p",{className:"text-sm text-purple-700",children:["Relat\xf3rio do dia: ",(0,t.jsx)("span",{className:"font-medium",children:ex})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>a("history"),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mr-1"}),"Ver Hist\xf3rico"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:e5,className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-1"}),"Voltar ao Atual"]})]})]})})}),(0,t.jsx)(eO,{data:ey})]}),(0,t.jsx)(i.av,{value:"history",children:(0,t.jsx)(e_,{onViewHistoricalReport:e4})}),(0,t.jsx)(i.av,{value:"analytics",children:(0,t.jsx)(sf,{})}),(0,t.jsx)(i.av,{value:"diagnostics",children:(0,t.jsx)(sv,{})}),(0,t.jsx)(i.av,{value:"production",children:(0,t.jsx)(sw,{data:eG,currentHour:new Date().getHours().toString()+":00"})}),(0,t.jsx)(i.av,{value:"executive",children:(0,t.jsx)(sE,{period:30})})]})}),(0,t.jsx)(eU,{isOpen:eL,onClose:()=>{eD(!1),eT(null)},file:eM,onConfirm:e=>{eD(!1),eT(null)}}),(0,t.jsx)(e8,{isOpen:ek,unmappedItems:e$,onContinue:eX,onCancel:()=>{eF(!1),eB([]),eV(null),p(!1),z("idle"),q("Processamento cancelado pelo usu\xe1rio")},userId:e?.id})]})}},3209:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>n,Zp:()=>i,aR:()=>c});var t=a(5155),r=a(2115),l=a(5016);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));c.displayName="CardHeader";let n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},3884:(e,s,a)=>{"use strict";a.d(s,{eu:()=>c,q5:()=>n});var t=a(5155),r=a(2115),l=a(7870),i=a(5016);let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.bL,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));c.displayName=l.bL.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l._V,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",e),...s})).displayName=l._V.displayName;let n=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.H4,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));n.displayName=l.H4.displayName},5016:(e,s,a)=>{"use strict";a.d(s,{cn:()=>l});var t=a(2821),r=a(5889);function l(...e){return(0,r.QP)((0,t.$)(e))}},6170:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(5155),r=a(2115),l=a(5016);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},7001:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(5155),r=a(2115),l=a(5016);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Textarea"},7003:(e,s,a)=>{"use strict";a.d(s,{$:()=>o,r:()=>n});var t=a(5155),r=a(2115),l=a(2467),i=a(2885),c=a(5016);let n=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...i},o)=>{let d=r?l.DX:"button";return(0,t.jsx)(d,{className:(0,c.cn)(n({variant:s,size:a,className:e})),ref:o,...i})});o.displayName="Button"},7812:(e,s,a)=>{"use strict";a.d(s,{E:()=>c});var t=a(5155);a(2115);var r=a(2885),l=a(5016);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,...a}){return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:s}),e),...a})}}},e=>{e.O(0,[5647,7925,1262,71,8720,1400,8441,1255,7358],()=>e(e.s=2317)),_N_E=e.O()}]);